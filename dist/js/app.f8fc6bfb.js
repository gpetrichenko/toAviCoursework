(function(t){function e(e){for(var a,n,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,n=1;n<r.length;n++){var c=r[n];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},s={app:0},i=[];function n(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-2d0bd977":"24fbdd01"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],r=s[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,a){r=s[t]=[e,a]}));e.push(r[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=n(t);var u=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(d);var r=s[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,r[1](u)}s[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/toAviCoursework/dist/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"00c2":function(t,e,r){},"011e":function(t,e,r){},"034f":function(t,e,r){"use strict";var a=r("85ec"),s=r.n(a);s.a},"05d1":function(t,e,r){"use strict";var a=r("ed6a"),s=r.n(a);s.a},1176:function(t,e,r){"use strict";var a=r("f535"),s=r.n(a);s.a},"191a":function(t,e,r){},"1b21":function(t,e,r){},"24c5":function(t,e,r){},2708:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n}));r("d3b7"),r("25f0"),r("5319");var a=r("c1df"),s=r.n(a);s.a.lang("ru");var i={filters:{currency:function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+" ₽"}}},n={filters:{fromNow:function(t){return t?s()(t).fromNow():"-"}}}},"2c52":function(t,e,r){"use strict";var a=r("1b21"),s=r.n(a);s.a},"2fa3":function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return d}));r("d3b7");var a=r("bc3a"),s=r.n(a),i=r("3d20"),n=r.n(i),o="https://toavicoursework.herokuapp.com/api",c=s.a.create({baseURL:o,withCredentials:!0});c.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers["Authorization"]="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)}));var u=c,d=n.a.mixin({toast:!0,background:"#e6e6e6",scrollbarPadding:!0,position:"bottom-end",showConfirmButton:!1,timer:5e3,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})},3140:function(t,e,r){},"325a":function(t,e,r){t.exports=r.p+"img/loading.b0d3b945.gif"},"35e5":function(t,e,r){"use strict";var a=r("24c5"),s=r.n(a);s.a},4678:function(t,e,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=i(t);return r(e)}function i(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=i,t.exports=s,s.id="4678"},"4b87":function(t,e,r){"use strict";var a=r("191a"),s=r.n(a);s.a},"4dc6":function(t,e,r){"use strict";var a=r("bb0b"),s=r.n(a);s.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("navigation"),r("main",[r("router-view")],1)],1)},i=[],n=(r("4989"),r("ab8b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vs-navbar",{staticClass:"nabarx",model:{value:t.activeItem,callback:function(e){t.activeItem=e},expression:"activeItem"}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("vs-navbar-title",[a("router-link",{staticClass:"navbar-brand col-2",attrs:{to:{name:"index"}}},[a("img",{staticStyle:{"max-width":"100px"},attrs:{src:r("937e"),alt:"logo"}})])],1)],1),a("vs-navbar-item",{attrs:{index:"0"}},[a("a",[t.isAuthenticated&&"admin"!==!t.currentUser.role?t._e():[a("a",[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"signIn"}}},[t._v("Вход / Регистрация")])],1)]],2)]),t.isAuthenticated||"admin"===t.currentUser.role?[a("vs-navbar-item",{attrs:{index:"1"}},[a("router-link",{attrs:{to:{name:"userProducts",params:{id:t.currentUser.id}}}},[t._v(" Профиль ")])],1),a("vs-navbar-item",{attrs:{index:"2"}},[a("router-link",{attrs:{to:{name:"userWishList",params:{id:t.currentUser.id}}}},[t._v(" Избранное ")])],1)]:t._e(),"moderator"===t.currentUser.role||"admin"===t.currentUser.role?[a("vs-navbar-item",[a("router-link",{staticClass:"nav-link",staticStyle:{color:"#147887"},attrs:{to:{name:"moderatorProducts"}}},[t._v(" Модератор ")])],1)]:t._e(),"admin"===t.currentUser.role?[a("vs-navbar-item",[a("router-link",{staticClass:"nav-link",staticStyle:{color:"#0daa3d"},attrs:{to:{name:"adminProducts"}}},[t._v(" Администратор ")])],1)]:t._e(),t.isAuthenticated?[a("vs-navbar-item",[a("a",{on:{click:t.logout}},[t._v("Выход")])])]:t._e()],2)],1)}),o=[],c=(r("a4d3"),r("4de4"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("96cf"),r("ade3")),u=r("2f62"),d=r("2fa3"),l={getCategories:function(){return d["b"].get("/categories")}};function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g={data:function(){return{categories:[]}},computed:m({},Object(u["b"])(["currentUser","isAuthenticated"]),{inAboutPage:function(){return"about"==this.$route.name}}),created:function(){this.fetchCategories()},beforeRouteUpdate:function(t,e,r){this.fetchCategories(),r()},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/index")},fetchCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,this.$store.dispatch("updateProcessing",!1),a.next=4,regeneratorRuntime.awrap(l.getCategories());case 4:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=9;break}throw new Error(r);case 9:this.categories=e.categories,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"Получить информацию о категории не удалось, попробуйте немного позже"});case 15:case"end":return a.stop()}}),null,this,[[0,12]])},gotoContact:function(t){this.$router.push({name:"about",query:{el:t}})}}},v=g,f=r("2877"),h=Object(f["a"])(v,n,o,!1,null,null,null),b=h.exports,w={name:"App",components:{navigation:b}},y=w,P=(r("034f"),Object(f["a"])(y,s,i,!1,null,null,null)),C=P.exports,x=(r("caad"),r("2532"),r("8c4f")),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",[t._v(" 404 Page Not Found ")])},A=[],O={},k=Object(f["a"])(O,_,A,!1,null,null,null),j=k.exports,E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("body",[r("section",{staticClass:"featured spad"},[r("div",{staticClass:"container"},[r("center",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("div",{staticClass:"hero__search",staticStyle:{"margin-bottom":"20px"}},[r("div",{staticClass:"hero__search__form"},[r("form",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"Что вы ищете?"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),r("button",{staticClass:"site-btn",attrs:{type:"submit"},on:{click:function(e){return t.search()}}},[t._v("Найти")])])])])]),r("div",{staticClass:"col-lg-12 mt-4"},[r("div",{staticClass:"featured__controls"},[r("ProductsNavPills",{attrs:{categories:t.categories}})],1)])])]),r("div",{staticClass:"row featured__filter textac"},t._l(t.products,(function(e){return r("productCard",{key:e.id,attrs:{"initial-product":e,"card-height":t.productCardHeight}})})),1)],1),t.totalPage>1?r("RestaurantsPagination",{attrs:{"current-page":t.currentPage,"total-page":t.totalPage}}):t._e()],1)])},I=[],R=(r("d81d"),r("498a"),r("bfbf")),S=r("ee21"),$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{attrs:{"aria-label":"Page navigation example"}},[r("ul",{staticClass:"pagination"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"index",query:{categoryId:t.categoryId,page:t.previousPage}},exact:""}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return r("li",{key:e,class:["page-item",{active:t.currentPage===e}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"index",query:{categoryId:t.categoryId,page:e}}}},[t._v(t._s(e))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{"aria-label":"Next",to:{name:"index",query:{categoryId:t.categoryId,page:t.nextPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])},D=[],U=(r("a9e3"),{props:{categoryId:{type:[String,Number],default:""},currentPage:{type:Number,default:1},totalPage:{type:Number,default:0}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1}}}),N=U,L=(r("c99d"),Object(f["a"])(N,$,D,!1,null,"68389ae2",null)),K=L.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("router-link",{staticStyle:{color:"black"},attrs:{to:{name:"index"},exact:""}},[t._v("Все")])],1),t._l(t.categories,(function(e){return r("li",{key:e.id},[r("router-link",{staticClass:"nav-link",staticStyle:{color:"black"},attrs:{to:{name:"index",query:{categoryId:e.id}}}},[t._v(t._s(e.name)+" ")])],1)}))],2)},T=[],M={props:{categories:{type:Array,required:!0}}},q=M,B=(r("df88"),Object(f["a"])(q,F,T,!1,null,null,null)),Q=B.exports;function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var G={components:{productCard:R["a"],RestaurantsPagination:K,ProductsNavPills:Q},data:function(){return{categories:[],categoryId:"",products:[],productCardHeight:31.5,currentPage:1,totalPage:0,searchText:""}},computed:{isLoading:function(){return this.$store.state.isLoading}},created:function(){var t=this.$route.query,e=t.page,r=t.categoryId;this.fetchProducts({page:e,categoryId:r})},beforeRouteUpdate:function(t,e,r){var a=t.query,s=a.page,i=a.categoryId;this.fetchProducts({page:s,categoryId:i}),r()},methods:{search:function(){this.searchText=this.searchText.trim(),""===this.searchText?d["a"].fire({icon:"warning",title:"Please input you want to search the text！"}):this.$router.push("/index/search?q=".concat(this.searchText))},fetchProducts:function(t){var e,r,a,s,i,n,o,c;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:return e=t.page,r=void 0===e?1:e,a=t.categoryId,s=void 0===a?"":a,u.prev=1,this.$store.dispatch("updateLoading",!0),u.next=5,regeneratorRuntime.awrap(S["a"].getProducts({page:r,categoryId:s}));case 5:if(i=u.sent,n=i.data,o=i.statusText,"OK"===o){u.next=10;break}throw new Error(o);case 10:c=this.$store.state.wishList,this.$store.state.isAuthenticated&&c.length>0&&(this.products=n.products.map((function(t){return z({},t,{isFavorited:c.map((function(t){return t.id})).includes(t.id)})}))),this.products=n.products,this.totalPage=n.totalPage.length,this.categoryId=n.categoryId,this.currentPage=n.page,this.categories=n.categories,this.$store.dispatch("updateLoading",!1),u.next=24;break;case 20:u.prev=20,u.t0=u["catch"](1),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о продуктах, пожалуйста, попробуйте снова позже"});case 24:case"end":return u.stop()}}),null,this,[[1,20]])}}},Z=G,J=Object(f["a"])(Z,E,I,!1,null,null,null),V=J.exports,W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container mb-5"},[r("div",{staticClass:"text-left"},[r("h1",[r("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:{name:"adminProductCreate"}}},[t._v("Новый товар")])],1)]),r("div",{staticClass:"table-responsive-md"},[r("table",{staticClass:"table table-striped"},[t._m(0),r("tbody",t._l(t.products,(function(e){return r("tr",{key:e.id},[r("td",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[r("router-link",{attrs:{to:{name:"userProduct",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),r("td",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v(t._s(e.category))]),r("td",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v(t._s(e.sell_price))]),r("td",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v(t._s(e.status))]),r("td",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[r("router-link",{staticClass:"btn btn-outline-dark",attrs:{to:{name:"userProductEdit",params:{id:e.id}}}},[t._v("Изменить")])],1),r("td",{staticClass:"textac",staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[r("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.deleteProduct(e.id)}}},[t._v("Удалить")])])])})),0)])]),t.totalPage>1?r("nav",{attrs:{"aria-label":"Page navigation"}},[r("ul",{staticClass:"pagination"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"userProducts",query:{page:t.previousPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return r("li",{key:e,class:["page-item",{active:t.currentPage===e}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"userProducts",query:{page:e}}}},[t._v(t._s(e))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminProductCreate",query:{page:t.nextPage}},"aria-label":"Next"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)]):t._e()])])},H=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v("Название")]),r("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v("Категория")]),r("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v("Цена")]),r("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v("Статус")]),r("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v("Редактировать")]),r("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col textac"}},[t._v("Удалить")])])])}],X=(r("99af"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d"),{products:{get:function(t){var e=t.page,r=new URLSearchParams({page:e});return d["b"].get("/users/products?".concat(r.toString()))},post:function(t){for(var e=t.formData,r=t.images,a=0;a<r.length;a++)e.append("images",r[a]);return d["b"].post("/users/products",e)},put:function(t){var e=t.id,r=t.formData;return d["b"].put("/users/products/".concat(e),r)},getStatus:function(t){var e=t.id;return d["b"].get("/users/products/".concat(e,"/stocks"))},getStatusDatail:function(t){var e=t.id,r=t.stock_id;return d["b"].get("/users/products/".concat(e,"/stocks/").concat(r))},postStatus:function(t){var e=t.productId;return d["b"].post("/users/products/".concat(e,"/stocks"))},putStatus:function(t){var e=t.id,r=t.stock_id,a=t.stock;return d["b"].put("/users/products/".concat(e,"/stocks/").concat(r),{stock:a})},deleteStatus:function(t){var e=t.id,r=t.stock_id;return d["b"].delete("/users/products/".concat(e,"/stocks/").concat(r))},deleteImage:function(t){return d["b"].delete("/users/image/".concat(t))},getProductDetail:function(t){var e=t.id;return d["b"].get("/users/products/".concat(e))},delete:function(t){var e=t.productId;return d["b"].delete("/users/products/".concat(e))}},categories:{get:function(){return d["b"].get("/admins/categories")}},getCurrentUser:function(){return d["b"].get("/get_current_user")},getUserOrders:function(){return d["b"].get("/users/orders")},getUserProducts:function(t){var e=t.page,r=new URLSearchParams({page:e});return d["b"].get("/users/products?".concat(r.toString()))},getUserOrder:function(t){var e=t.orderId;return d["b"].get("/users/orders/".concat(e))},getUserFavorite:function(){return d["b"].get("/users/wishlist")},postPasswordChange:function(t){var e=t.formData;return d["b"].post("/users/password_change",e)},postPasswordForget:function(t){var e=t.formData;return d["b"].post("/users/password_forget",e)},getResetPassword:function(t){var e=t.tokenId,r=t.token;return d["b"].get("/users/password_reset/".concat(e,"/").concat(r))},postResetPassword:function(t){var e=t.formData;return d["b"].post("/users/password_reset",e)},putUser:function(t){var e=t.formData;return d["b"].put("/users/edit",e)}});function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var rt={data:function(){return{products:[],currentPage:0,totalPage:0}},computed:et({},Object(u["b"])(["currentUser"]),{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1},isLoading:function(){return this.$store.state.isLoading}}),created:function(){var t=this.$route.query.page;this.fetchUserProducts({page:t})},beforeRouteUpdate:function(t,e,r){var a=t.query.page;this.fetchUserProducts({page:a}),r()},methods:{deleteProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateProcessing",!0),s.next=4,regeneratorRuntime.awrap(X.products.delete({productId:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(a);case 9:this.products=this.products.filter((function(e){return e.id!==t})),this.$store.dispatch("updateProcessing",!1),s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Продукт не может быть удалена"});case 17:case"end":return s.stop()}}),null,this,[[0,13]])},fetchUserProducts:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.page,r=void 0===e?1:e,n.prev=1,this.$store.dispatch("updateLoading",!0),n.next=5,regeneratorRuntime.awrap(X.getUserProducts({page:r}));case 5:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i){n.next=10;break}throw new Error(i);case 10:this.products=s.products,this.currentPage=s.page,this.totalPage=s.totalPage.length,this.$store.dispatch("updateLoading",!1),n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](1),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о продукте"});case 20:case"end":return n.stop()}}),null,this,[[1,16]])}}},at=rt,st=Object(f["a"])(at,W,H,!1,null,null,null),it=st.exports,nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container py-5"},[t.isLoading?r("div",[r("Spinner")],1):r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("productBreadcrumb",{attrs:{path:t.path}})],1),r("section",{staticClass:"product-details spad"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6 col-md-6"},[r("productCarousel",{attrs:{"product-images":t.productImgs}})],1),r("productDetail",{attrs:{"initial-product":t.product}})],1)])])])])])},ot=[],ct=(r("e01a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[r("div",{staticClass:"breadcrumb-wrap"},[r("nav",{attrs:{"aria-label":"breadcrumb"}},[r("div",{staticClass:"breadcrumb-title"},[t._v("Информация о продукте")]),r("ul",{staticClass:"breadcrumb"},[r("li",{staticClass:"breadcrumb-item"},[r("router-link",{attrs:{to:{name:"index"}}},[t._v("Главная")])],1),r("li",{staticClass:"breadcrumb-item active"},[r("router-link",{attrs:{to:{name:"products"}}},[t._v("Товары")])],1),r("li",{staticClass:"breadcrumb-item active"},[r("router-link",{attrs:{to:{name:"index",query:{categoryId:t.path.categoryId}}}},[t._v(t._s(t.path.categoryName))])],1),r("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[t._v(t._s(t.path.name))])])])])])}),ut=[],dt={props:{path:{type:Object,required:!0}},data:function(){return{product:this.path}}},lt=dt,pt=Object(f["a"])(lt,ct,ut,!1,null,null,null),mt=pt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"carousel"},[a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active"},[a("vue-load-image",[a("img",{staticClass:"d-block w-100",attrs:{slot:"image",src:t.imageUrl,alt:"slide"},slot:"image"}),a("img",{staticClass:"d-block w-100",attrs:{slot:"preloader",src:r("325a")},slot:"preloader"}),a("div",{staticClass:"d-block w-100",attrs:{slot:"error"},slot:"error"},[t._v("Фотографии удалось загрузить")])])],1)])])]),a("div",{staticClass:"row mt-2 mb-2"},t._l(t.images,(function(e){return a("div",{key:e.id,staticClass:"col-2 col-sm-2 col-md-2"},[a("div",{staticClass:"card"},[a("vue-load-image",[a("img",{staticClass:"card-img-top",staticStyle:{cursor:"pointer"},attrs:{slot:"image",src:e.url},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.toggleImageUrl(e.url)}},slot:"image"}),a("img",{staticClass:"card-img-top",attrs:{slot:"preloader",src:r("e217")},slot:"preloader"}),a("div",{staticClass:"card-img-top",attrs:{slot:"error"},slot:"error"},[t._v("Фотографии удалось загрузить")])])],1)])})),0)])},vt=[],ft=r("118d"),ht=r.n(ft);function bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var yt={components:{"vue-load-image":ht.a},props:{productImages:{type:Array,required:!0}},data:function(){return{images:this.productImages,imageUrl:""}},created:function(){this.imageUrl=this.images[0].url},watch:{productImages:function(t){this.images=wt({},this.images,{},t)}},methods:{toggleImageUrl:function(t){this.imageUrl=t}}},Pt=yt,Ct=(r("e9fb"),Object(f["a"])(Pt,gt,vt,!1,null,null,null)),xt=Ct.exports,_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-lg-6 col-md-6"},[r("div",{staticClass:"product__details__text"},[r("h3",[t._v(t._s(t.product.name))]),r("div",{staticClass:"product__details__rating"}),r("div",{staticClass:"product__details__price"},[t._v(t._s(t._f("currency")(t.product.sellPrice)))]),r("p",[t._v(t._s(t.product.description))]),r("div",{staticClass:"product__details__quantity"},[t.isAuthenticated?r("div",{staticClass:"mt-1"},[t.product.isFavorited?r("button",{staticClass:"btn btn-outline-danger product-detail-btn textal",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFavorite(t.product.id)}}},[r("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"heart",size:"1x"}}),t._v("Убрать из избранного ")],1):r("button",{staticClass:"btn btn-outline-danger product-detail-btn textal",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFavorite(t.product.id)}}},[r("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["far","heart"],size:"1x"}}),t._v("Добавить в избранное ")],1)]):t._e(),t.isAuthenticated?r("div",{staticClass:"mt-1"},[0==t.product.CreatedRoom?[r("button",{staticClass:"btn btn-outline-secondary product-detail-btn textal",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addRoom(t.product.id)}}},[r("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["far","message"],size:"1x"}}),t._v("Написать сообщение ")],1)]:0!==t.product.CreatedRoom?[r("router-link",{attrs:{to:{name:"room",params:{id:t.product.CreatedRoom}}}},[r("div",{staticClass:"btn btn-outline-secondary product-detail-btn textal "},[t._v("Написать сообщение")])])]:t._e()],2):r("div",{staticClass:"mt-1"},[r("button",{staticClass:"btn btn-sm text-danger btn-block mr-2",attrs:{type:"button","data-container":"body","data-toggle":"popover","data-placement":"bottom","data-content":"Войдите/Зарегистрируйтесь"},on:{mouseover:t.heartToggle}},[r("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["far","heart"],size:"1x"}}),t._v("Избранное ")],1)])]),r("ul",[r("li",[r("b",[t._v("Автор")]),t._v(" "),r("span",[t._v(" "+t._s(t.product.authorName)+" "+t._s(t.product.authorLastname))])])])])])},At=[],Ot=r("1157"),kt=r.n(Ot),jt=r("2708");function Et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Rt,St,$t={mixins:[jt["a"]],props:{initialProduct:{type:Object,required:!0}},data:function(){return{product:this.initialProduct,quantity:0,CreatedRoom:0}},computed:It({},Object(u["b"])(["currentUser","isProcessing"]),{isAuthenticated:function(){return this.$store.state.isAuthenticated},formData:function(){var t=this.quantity;return{productId:this.product.id,authorId:this.product.authorId,quantity:t}},currentURL:function(){var t=this.$route.path;return t}}),watch:{initialProduct:function(t){this.product=It({},this.product,{},t)}},methods:{addFavorite:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.$store.dispatch("addFavorite",t));case 3:this.product=It({},this.product,{isFavorited:!0}),e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),null,this,[[0,6]])},addRoom:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.$store.dispatch("addRoom",t));case 3:this.product=It({},this.product),e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!1);case 9:this.$router.push({path:"/users/room"});case 10:case"end":return e.stop()}}),null,this,[[0,6]])},deleteFavorite:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.$store.dispatch("deleteFavorite",t));case 3:this.product=It({},this.product,{isFavorited:!1}),e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),null,this,[[0,6]])},heartToggle:function(){kt()('[data-toggle="popover"]').popover()}}},Dt=$t,Ut=(r("4b87"),Object(f["a"])(Dt,_t,At,!1,null,"771a8ae2",null)),Nt=Ut.exports,Lt={},Kt=Object(f["a"])(Lt,Rt,St,!1,null,null,null),Ft=Kt.exports,Tt={components:{productBreadcrumb:mt,productCarousel:xt,productDetail:Nt,Spinner:Ft},data:function(){return{path:{categoryId:-1,categoryName:"",namd:""},product:{id:0,name:"",sellPrice:"",originPricd:"",description:"",isFavorited:!1,CreatedRoom:0,authorName:"",authorLastname:""},productImgs:[]}},computed:{isLoading:function(){return this.$store.state.isLoading}},created:function(){var t=this.$route.params.id;this.fetchProduct(t)},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchProduct(a),r()},methods:{fetchProduct:function(t){var e,r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,this.$store.dispatch("updateLoading",!0),i.next=4,regeneratorRuntime.awrap(S["a"].getProduct({productId:t}));case 4:if(e=i.sent,r=e.data,a=e.statusText,"OK"===a){i.next=9;break}throw new Error(a);case 9:s=this.$store.state.wishList,this.path={categoryId:r.product.CategoryId,categoryName:r.product.category,name:r.product.name},this.$store.state.isAuthenticated&&s.length>0?this.product={id:r.product.id,name:r.product.name,sellPrice:r.product.sell_price,authorName:r.product.authorName,authorLastname:r.product.authorLastname,description:r.product.description,isFavorited:s.map((function(t){return t.id})).includes(r.product.id),CreatedRoom:r.product.CreatedRoom}:this.$store.state.isAuthenticated?this.product={id:r.product.id,name:r.product.name,sellPrice:r.product.sell_price,authorName:r.product.authorName,authorLastname:r.product.authorLastname,description:r.product.description,CreatedRoom:r.product.CreatedRoom}:this.product={id:r.product.id,name:r.product.name,sellPrice:r.product.sell_price,originPricd:r.product.origin_price,description:r.product.description},this.productImgs=r.product.images,this.$store.dispatch("updateLoading",!1),i.next=20;break;case 16:i.prev=16,i.t0=i["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Не получается получить информацию о продукте, пожалуйста, попробуйте снова позже"});case 20:case"end":return i.stop()}}),null,this,[[0,16]])}}},Mt=Tt,qt=Object(f["a"])(Mt,nt,ot,!1,null,null,null),Bt=qt.exports,Qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[[r("div",[r("div",[t._m(0),r("header",{attrs:{id:"header"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("adminNav")],1)])]),r("section",{attrs:{id:"main"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"list-group"},[r("adminNavigation"),r("a",{staticClass:"nav-main-color list-group-item mb-1 textac",staticStyle:{color:"white"}},[t._v(" Функции ")]),r("a",{staticClass:"mb-1 textac"},[t._v("Название категории: ")]),r("a",{staticClass:"mb-1"},[r("div",{staticClass:"col-auto mb-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newCategoryName,expression:"newCategoryName"}],staticClass:"form-control textac btn-block",attrs:{type:"text",required:"",placeholder:"Название"},domProps:{value:t.newCategoryName},on:{input:function(e){e.target.composing||(t.newCategoryName=e.target.value)}}})]),r("div",{staticClass:"col-auto"},[r("button",{staticClass:"btn btn-outline-primary btn-block",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.createCategory(e)}}},[t._v("Создать")])])])],1)]),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"panel panel-default "},[r("div",{staticClass:"panel-heading main-color-bg"}),r("div",{staticClass:"panel-body"},[r("div",{staticClass:"table-responsive-md"},[r("table",{staticClass:"table table-striped"},[t._m(1),r("tbody",t._l(t.categories,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditing,expression:"!category.isEditing"}],staticClass:"category-name"},[t._v(t._s(e.name))]),r("input",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"category.isEditing"},{name:"model",rawName:"v-model",value:e.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",required:"required"},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"category.isEditing"}],staticClass:"cancel",on:{click:function(r){return t.handleCancel(e.id)}}},[t._v("✕")])]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[e.isEditing?t._e():r("button",{staticClass:"btn btn-outline-dark",attrs:{disabled:t.isProcessing},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.toggleIsEditing(e.id)}}},[t._v("Изменить")]),e.isEditing?r("button",{staticClass:"btn btn-dark",attrs:{disabled:t.isProcessing},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.editCategory({categoryId:e.id,category:e.name})}}},[t._v("Сохранить")]):t._e()]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.deleteCategory(e.id)}}},[t._v("Удалить")])])])})),0)])])])])])])])])])])]],2)},Yt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-default"},[r("div",{staticClass:"container"},[r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"myNavbar"}},[r("ul",{staticClass:"nav navbar-nav navbar-block navbar-left"},[r("li",[r("a",[t._v("Dashboard")])]),r("li",[r("a",[t._v("Pages")])]),r("li",[r("a",[t._v("Posts")])]),r("li",[r("a",[t._v("Users")])])]),r("ul",{staticClass:"nav navbar-nav navbar-block navbar-right"},[r("li",[r("a",[t._v("Welcome, User")])]),r("li",[r("a",[t._v("Logout")])])])])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Название категории")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Изменение")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Удаление")])])])}],zt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Gt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container pt-5"},[r("section",{staticClass:"breadcrumb-section set-bg",staticStyle:{"background-image":"url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISDw8QDw8PFRAVDw8NDw8PDw8PDw8PFRUWFhURFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDQ0OFQ8PFSsZFRktKysrLS0rLSsrLS0tKys3LSsrKy0tLSsrLS03LTc3Ky0rKy0rLTctKys3LS0tKy0tK//AABEIAKoBKQMBIgACEQEDEQH/xAAZAAADAQEBAAAAAAAAAAAAAAAAAQIDBAf/xAAuEAACAgAEBQMDBAMBAAAAAAAAAQIRAxIhMUFRYXGBkaHwEzKxBMHh8SJS0RT/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQIE/8QAGREBAQEAAwAAAAAAAAAAAAAAAAERAiFB/9oADAMBAAIRAxEAPwDy4ACzpYMEKx2AwEFkFAIYAArHYDAVhYFCCwAYCsLKGAiWyC7JbFYmwuHmCzJsaZTF2TJktktlxBJiSA2wY8SocMOu5dADMqmTJQMcUZaOiJFszkUIdCRaIM5EoqZnJlEzZA2IrNdYE5h5iKZUSLKugLolhnQkwGOybBsGKsLIzDbCqQyMxSYQ8oDsVgMAsCCkhNDsicihNkMlyC/QoucK4mYWACYmDYJWaZqsONv8nQKEaQGbVkUiZMozkyLAi0ZwZoyFSzObKkzGTKq4GhlgGrAzmYs1mZMQqRgFGkOxpjodEDT2ZcpkxQwAEMca4gSxNhYgCy4rmKMS2AmweKm9CJW9jWEQhoaQ0NkEsaE2Tm1ojS2yJMeLojnlLgy4hyYEN8iopmg7KUbKhhmlBNYSgbYUK14jSspi1ITZMdSZSNIKkZbEmYyZpJmTIRWFHWzSQQVIUmBlNmcipGczQ2/TLRs0kEI0kuhM2ZGWIzMqQQhZpBGNl/R6m0Y0gGowAmwsqrjKh2Z2FkF5gbJzFOLX8AAJE2OwjRCnIjMKUuhRphamphhzo2zWSi0JslyJlIijEkY57CVk5e3qWQtVOT4mcisvXTswcflF6RMWdWHJHLXzQdDUduYV2cmc6P02tsDYiTKkYzZluHhq2bMzwFuy5BPUTZnFW0VNhgLVhWzMpmkjKbIkZMvAW5nJl/puPg0N2Y4jNZHPNkioN8BbswOrCjSKyoAADisAGaxCAYDAIuU29/wSXhq3sTFTQZflnRiR02MZJrgIFXb1HXymCTHl6lxNCXykaRl80MlHr7GkZf41TIqZS3107shzXxMtQ4V7jUV09GxhrNNfKQX192aKPL8JBk5/kghfNH+4tuC9ka5Pm5SgXBzX09H/AMKyHWloDRByfSOnCjSEy2WpETZztmuLIyirZmNurCX+KJmxxZOIKkZyZf6d79zFihiU+nEquqZhNmrdo55EgTNcBqq47mIio6pS0OaQ4zHJASX9R8zMZUdUJ2irOfA3Nhg5crA0E5GkQMaS6j9QEOIF2EK3zYKI8o12IpfT6jUV1KQ2gEo9xqC5BGPctNE0Crl7BoLsFdCBPx5Y/miD0FXVlDHkJ1HmQA78BYyWlxCKiEmOOxGIyVqMMR6lYTrV9jNnTGGlCHKmnewNCcEtnRKb6suakuInExaOrMmY4i6EaRh4ldjZxvYwoqFrlQCkiWaziZ139AJY0x5TSMWtl5ZUZGmHhN9i02v6KWIBaVDJUgsDnvoIsCokChgJLoUhIYDHXcBoAQ33GkBFFCfShibCJSf+xpQB5AdA4hnQ1Iip8eoZRykKiomTfcaodpAlbWnUCmYYzN5nPjLUy1GeGtb0011NViviqXMvCw6XC+Y3iLZa9tTTNEWt7FLFXDXsZywb5LpuKUmtGvKLiKTbetL8jdGGe9kFc34RK1DnLqXhpLW0TpW2hnJJ7X4A3eJeyb/ARjzpdjO5LgH1uSKjeKXxkYmKkZ1e78IpKtkiKaxUxOa/oibXEiKfCwLd9vyFvmycz4oM4G4DEEAAIBgAFFIdkjsgqwZJSAVhY6E1RAmwa7jvoNrr6F0wUlr/AGGfkvUUq5fuGZ8V5/6MNWn2FJdTGU3z8IrCVAaRa5UaRZmybcdtV7jB0UZzwk9zB47ei/kylJvmyYq3d6PMuRpDGj2M8PFrR7DnUtotvnt7mkafVv7Y31eiIeG39z8LYWWUdtUP/wBHBJX14EGcsMhtm7w293fRaIUsOlsU1ivllJkNkkVbxO4t9xDTRA65Mlt8QbEBSouzIaYGlisix2B15RUVYgFQUMAhUFF5R5QqKGkXQmgEhiHYCHYgoImViT5lkSjyKSnYnJ/wTYwoj2DOu3NMCZdfDKyee/tXl6I0gnxfjkZRk1Se3NFLFvRLyxhqcWGt+6MsS6/fidGS/ufhaIWLh8gOdR8m2HOuKozr1JrmMV1fWXBW/YmWE5fdXgiEq7GrxFzGIxcZR21RDk3u/B0Zm+iMsWHrzKMlEcl1JYJEaIKGMgQi2uRADsZIEAABQHaAAAWMQUEOx2IAHYCGFAMGIIaGSOygaFZViaBiZRszLYPUqamwsTQrI0pdPQlx4rR8hlKXP1NaziVjVutS6b40iZw/si2uwRo8JGLRcv1Bi22RqG0VCVEoY0xt9QzxMQzY0UxLCimTZlRY7JbAaHmEAEAAAACoYAdoAAAAAADEAQwGAUmAMRUMBDQAOxAA2RJFAxBnYmgmETSQAJgRVKQ9CAAbw1Y3FAJ7BEtColDYsWEyQYkRQxDEwAAAgAAAAAAAABgf/9k=)"},attrs:{"data-setbg":"img/breadcrumb.jpg"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12 text-center"},[r("div",{staticClass:"breadcrumb__text"},[r("h2",[t._v("Панель администратора")])])])])])]),r("p")])}],Zt={},Jt=Object(f["a"])(Zt,zt,Gt,!1,null,null,null),Vt=Jt.exports,Wt={categories:{get:function(){return d["b"].get("/admins/categories")},create:function(t){var e=t.category;return d["b"].post("/admins/categories",{category:e})},update:function(t){var e=t.categoryId,r=t.category;return d["b"].put("/admins/categories/".concat(e),{category:r})},delete:function(t){var e=t.categoryId;return d["b"].delete("/admins/categories/".concat(e))}},users:{get:function(t){var e=t.page,r=new URLSearchParams({page:e});return d["b"].get("/admins/users?".concat(r))},putUser:function(t){return d["b"].put("/admin/user",t)}},products:{get:function(t){var e=t.page,r=new URLSearchParams({page:e});return d["b"].get("/admins/products?".concat(r.toString()))},post:function(t){for(var e=t.formData,r=t.images,a=0;a<r.length;a++)e.append("images",r[a]);return d["b"].post("/admins/products",e)},put:function(t){var e=t.id,r=t.formData;return d["b"].put("/admins/products/".concat(e),r)},deleteImage:function(t){return d["b"].delete("/admins/image/".concat(t))},getProductDetail:function(t){var e=t.id;return d["b"].get("/admins/products/".concat(e))}}},Ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-group nav nav-pills"},[r("a",{staticClass:"nav-main-color list-group-item textac",staticStyle:{color:"white"}},[t._v(" Навигация ")]),r("a",{staticClass:"nav-item list-group-item list-group-item-action textac"},[r("router-link",{attrs:{to:{name:"adminProducts"}}},[t._v("Товары")])],1),r("a",{staticClass:"nav-item list-group-item list-group-item-action textac"},[r("router-link",{attrs:{to:{name:"adminUsers"}}},[t._v("Пользователи")])],1),r("a",{staticClass:"nav-item list-group-item list-group-item-action textac"},[r("router-link",{attrs:{to:{name:"adminCategories"}}},[t._v("Категории")])],1),r("p")])},Xt=[],te={},ee=Object(f["a"])(te,Ht,Xt,!1,null,null,null),re=ee.exports;function ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ie={components:{adminNav:Vt,adminNavigation:re},data:function(){return{categories:[],newCategoryName:""}},created:function(){this.fetchCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing},isLoading:function(){return this.$store.state.isLoading}},methods:{fetchCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,this.$store.dispatch("updateLoading",!0),a.next=4,regeneratorRuntime.awrap(Wt.categories.get());case 4:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=9;break}throw new Error(r);case 9:this.categories=e.categories.map((function(t){return se({},t,{isEditing:!1})})),this.$store.dispatch("updateLoading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Не получилось получить категорию"});case 17:case"end":return a.stop()}}),null,this,[[0,13]])},createCategory:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,this.newCategoryName){a.next=4;break}return d["a"].fire({icon:"warning",title:"Вы забыли ввести название категории"}),a.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),a.next=7,regeneratorRuntime.awrap(Wt.categories.create({category:this.newCategoryName}));case 7:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r&&"success"===e.status){a.next=12;break}throw new Error(r);case 12:this.categories.push(se({},e.category,{isEditing:!1})),this.newCategoryName="",this.fetchCategories(),this.$store.dispatch("updateProcessing",!1),a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Не получилось добавить новую категорию"});case 22:case"end":return a.stop()}}),null,this,[[0,18]])},editCategory:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.categoryId,r=t.category,n.prev=1,this.$store.dispatch("updateProcessing",!0),n.next=5,regeneratorRuntime.awrap(Wt.categories.update({categoryId:e,category:r}));case 5:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i||"success"===s.status){n.next=10;break}throw new Error(i);case 10:this.toggleIsEditing(e),this.$store.dispatch("updateProcessing",!1),n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](1),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Не получилось изменить категорию"});case 18:case"end":return n.stop()}}),null,this,[[1,14]])},deleteCategory:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateProcessing",!0),s.next=4,regeneratorRuntime.awrap(Wt.categories.delete({categoryId:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(a);case 9:this.categories=this.categories.filter((function(e){return e.id!==t})),this.$store.dispatch("updateProcessing",!1),s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Категория не может быть удалена, до тех пор пока продукты ассоциируются с данной категорией"});case 17:case"end":return s.stop()}}),null,this,[[0,13]])},toggleIsEditing:function(t){this.$store.dispatch("updateProcessing",!0),this.categories=this.categories.map((function(e){return e.id!==t?e:se({},e,{nameCached:e.name,isEditing:!e.isEditing})})),this.$store.dispatch("updateProcessing",!1)},handleCancel:function(t){this.categories=this.categories.map((function(e){return e.id!==t?e:se({},e,{category:e.nameCached})})),this.toggleIsEditing(t)}}},ne=ie,oe=Object(f["a"])(ne,Qt,Yt,!1,null,null,null),ce=oe.exports,ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("admin-nav"),t.isLoading?r("div",[r("Spinner")],1):r("div",[r("div",{staticClass:"table-responsive-md container"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",[t._v("Название")]),r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.product.name))]),r("td",[t._v("Категория")]),r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.product.category))])]),r("tr",[r("td",[t._v("Цена")]),r("td",[t._v(t._s(t.product.sellPrice))]),r("td",[t._v("Статус продукта")]),r("td",[t._v(t._s(t.product.status))])]),r("tr",[r("td",[t._v("Описание")]),r("td",{attrs:{colspan:"5"}},[t._v(t._s(t.product.description))])])])])]),r("div",{staticClass:"container adminProductImg"},[r("div",{staticClass:"row"},t._l(t.images,(function(t){return r("div",{key:t.id,staticClass:"col-md-3 mb-3"},[r("img",{attrs:{src:t.url,alt:""}})])})),0)]),r("div",{staticClass:"container my-5"},[r("div",{staticClass:"row justify-content-center"},[r("button",{staticClass:"btn btn-outline-success mx-3",on:{click:t.goToBack}},[t._v("Назад")]),r("router-link",{staticClass:"btn btn-outline-dark mx-3",attrs:{to:{name:"adminProductEdit",params:{id:t.product.id}}}},[t._v("Изменить")])],1)])])],1)},de=[],le={products:{get:function(t){var e=t.page,r=new URLSearchParams({page:e});return d["b"].get("/moderators/products?".concat(r.toString()))},post:function(t){for(var e=t.formData,r=t.images,a=0;a<r.length;a++)e.append("images",r[a]);return d["b"].post("/moderators/products",e)},put:function(t){var e=t.id,r=t.formData;return d["b"].put("/moderators/products/".concat(e),r)},deleteImage:function(t){return d["b"].delete("/moderators/image/".concat(t))},getProductDetail:function(t){var e=t.id;return d["b"].get("/moderators/products/".concat(e))},delete:function(t){var e=t.productId;return d["b"].delete("/moderators/products/".concat(e))}},categories:{get:function(){return d["b"].get("/admins/categories")}}},pe={components:{adminNav:Vt,Spinner:Ft},data:function(){return{product:{id:"",name:"",category:"",cost:0,sellPrice:0,status:0,description:""},images:[]}},created:function(){var t=this.$route.params.id;this.fetchAdminProduct(t)},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchAdminProduct(a),r()},computed:{isLoading:function(){return this.$store.state.isLoading}},methods:{fetchAdminProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateLoading",!0),s.next=4,regeneratorRuntime.awrap(le.products.getProductDetail({id:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a){s.next=9;break}throw new Error(a);case 9:this.product={id:r.product.id,name:r.product.name,category:r.product.category,cost:r.product.cost,sellPrice:r.product.sellPrice,status:r.product.status,description:r.product.description},this.images=r.product.images,this.$store.dispatch("updateLoading",!1),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Не получилось получить детали товара, попробуйте немного позже"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},goToBack:function(){this.$router.go(-1)}}},me=pe,ge=(r("a6a7"),Object(f["a"])(me,ue,de,!1,null,"3a485c0a",null)),ve=ge.exports,fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[t._m(0),r("header",{attrs:{id:"header"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("adminNav")],1)])]),r("section",{attrs:{id:"main"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("adminNavigation"),r("a",{staticClass:"nav-main-color list-group-item mb-1 textac",staticStyle:{color:"white"}},[t._v(" Функции ")]),r("router-link",{staticClass:"btn btn-outline-primary btn-block",attrs:{to:{name:"adminProductCreate"}}},[t._v("Добавить продукт")]),r("p")],1),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"panel panel-default "},[r("div",{staticClass:"panel-heading main-color-bg"}),r("div",{staticClass:"panel-body"},[r("div",{staticClass:"table-responsive-md"},[r("table",{staticClass:"table table-striped"},[t._m(1),r("tbody",t._l(t.products,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("router-link",{attrs:{to:{name:"adminProduct",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.category))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.sell_price))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.status))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("router-link",{staticClass:"btn btn-outline-dark",attrs:{to:{name:"adminProductEdit",params:{id:e.id}}}},[t._v("Изменить")])],1),r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.deleteProduct(e.id)}}},[t._v("Удалить")])])])})),0)]),t.totalPage>1?r("nav",{attrs:{"aria-label":"Page navigation"}},[r("ul",{staticClass:"pagination"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"adminProducts",query:{page:t.previousPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return r("li",{key:e,class:["page-item",{active:t.currentPage===e}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminProducts",query:{page:e}}}},[t._v(t._s(e))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminProducts",query:{page:t.nextPage}},"aria-label":"Next"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)]):t._e()])])])])])])])])])},he=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-default"},[r("div",{staticClass:"container"},[r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"myNavbar"}},[r("ul",{staticClass:"nav navbar-nav navbar-block navbar-left"},[r("li",[r("a",[t._v("Dashboard")])]),r("li",[r("a",[t._v("Pages")])]),r("li",[r("a",[t._v("Posts")])]),r("li",[r("a",[t._v("Users")])])]),r("ul",{staticClass:"nav navbar-nav navbar-block navbar-right"},[r("li",[r("a",[t._v("Welcome, User")])]),r("li",[r("a",[t._v("Logout")])])])])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Название")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Категория")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Цена")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Статус")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Редактировать")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Удалить")])])])}];function be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function we(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ye={components:{adminNav:Vt,adminNavigation:re},data:function(){return{products:[],currentPage:0,totalPage:0}},computed:we({},Object(u["b"])(["currentUser"]),{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1},isLoading:function(){return this.$store.state.isLoading}}),created:function(){var t=this.$route.query.page;this.fetchAdminProducts({page:t})},beforeRouteUpdate:function(t,e,r){var a=t.query.page;this.fetchAdminProducts({page:a}),r()},methods:{deleteProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateProcessing",!0),s.next=4,regeneratorRuntime.awrap(le.products.delete({productId:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(a);case 9:this.products=this.products.filter((function(e){return e.id!==t})),this.$store.dispatch("updateProcessing",!1),s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Продукт не может быть удалена"});case 17:case"end":return s.stop()}}),null,this,[[0,13]])},fetchAdminProducts:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.page,r=void 0===e?1:e,n.prev=1,this.$store.dispatch("updateLoading",!0),n.next=5,regeneratorRuntime.awrap(le.products.get({page:r}));case 5:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i){n.next=10;break}throw new Error(i);case 10:this.products=s.products,this.currentPage=s.page,this.totalPage=s.totalPage.length,this.$store.dispatch("updateLoading",!1),n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](1),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о продуктах"});case 20:case"end":return n.stop()}}),null,this,[[1,16]])}}},Pe=ye,Ce=Object(f["a"])(Pe,fe,he,!1,null,null,null),xe=Ce.exports,_e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("admin-nav"),t.isLoading?r("div",[r("Spinner")],1):r("form",{staticClass:"container mb-5",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(t.$route.params.id)}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"商品名稱",required:"required"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-4"},[r("label",{attrs:{for:"categoryId"}},[t._v("Категория")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.categoryId,expression:"product.categoryId"}],staticClass:"form-control",attrs:{name:"categoryId",id:"categoryId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"categoryId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:""}},[t._v("Пожалуйста, выберите")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"status"}},[t._v("Статус")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.status,expression:"product.status"}],staticClass:"form-control",attrs:{name:"status",id:"status"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"status",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"on"}},[t._v("Активно")]),r("option",{attrs:{value:"off"}},[t._v("Не активно")])])])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"originPrice"}},[t._v("Цена")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellPrice,expression:"product.sellPrice"}],staticClass:"form-control",attrs:{type:"text",name:"sellPrice",id:"sellPrice",placeholder:"Цена",required:"required"},domProps:{value:t.product.sellPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellPrice",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"description"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{name:"description",id:"description",cols:"120",rows:"3",placeholder:"Описание"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._m(0)]),r("div",{staticClass:"container adminProductImg"},[r("div",{staticClass:"row"},t._l(t.images,(function(e){return r("div",{key:e.id,staticClass:"prodcutImg col-md-3 mb-3"},[r("img",{attrs:{src:e.url,alt:""}}),r("div",{staticClass:"mask",attrs:{"data-imageId":e.id},on:{click:t.deleteImage}},[t._v("X")])])})),0)]),r("a",{staticClass:"btn btn-primary mx-3",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),r("button",{staticClass:"btn btn-outline-dark mx-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Подтвердить изменения")])])],1)},Ae=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"images"}},[t._v("Изображения продукта")]),r("input",{staticClass:"form-control",attrs:{type:"file",name:"images",id:"images",multiple:"multiple"}})])}],Oe=(r("c975"),r("a434"),{components:{adminNav:Vt,Spinner:Ft},data:function(){return{product:{name:"",categoryId:"",sellPrice:0,status:"",description:""},images:[],categories:[]}},created:function(){var t=this.$route.params.id;this.fetchAdminProduct(t),this.fetchAdminCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing},isLoading:function(){return this.$store.state.isLoading}},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchAdminProduct(a),r()},methods:{fetchAdminProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateLoading",!0),s.next=4,regeneratorRuntime.awrap(le.products.getProductDetail({id:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(status);case 9:this.product={name:r.product.name,categoryId:r.product.CategoryId,sellPrice:r.product.sell_price,status:r.product.status,description:r.product.description},this.images=r.product.images,this.$store.dispatch("updateLoading",!1),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о продукте, попробуйте немного позже"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},fetchAdminCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,this.$store.dispatch("updateLoading",!0),a.next=4,regeneratorRuntime.awrap(le.categories.get());case 4:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=9;break}throw new Error(r);case 9:this.categories=e.categories,this.$store.dispatch("updateLoading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию категории, попробуйте немного позже"});case 17:case"end":return a.stop()}}),null,this,[[0,13]])},handleSubmit:function(t){var e,r,a,s,i,n;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,this.product.name&&this.product.sellPrice&&this.product.description){o.next=4;break}return d["a"].fire({icon:"warning",title:"Пожалуйста заполните все поля"}),o.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),e=window.event,r=e.target,a=new FormData(r),o.next=10,regeneratorRuntime.awrap(le.products.put({id:t,formData:a}));case 10:if(s=o.sent,i=s.data,n=s.statusText,"OK"===n&&"success"===i.status){o.next=15;break}throw new Error(n);case 15:this.$store.dispatch("updateProcessing",!1),this.$router.push({name:"adminProducts"}),o.next=23;break;case 19:o.prev=19,o.t0=o["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Изменить информацию о продукте не удалось, попробуйте немного позже"});case 23:case"end":return o.stop()}}),null,this,[[0,19]])},deleteImage:function(t){var e,r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,e=t.target.dataset.imageid,i.next=4,regeneratorRuntime.awrap(le.products.deleteImage(e));case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=9;break}throw new Error(s);case 9:this.images.splice(this.images.indexOf(e),1),d["a"].fire({icon:"success",title:"Изображение успешно удалено!"}),i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](0),d["a"].fire({icon:"error",title:"Удалить изображение не удалось"});case 16:case"end":return i.stop()}}),null,this,[[0,13]])}}}),ke=Oe,je=(r("7f332"),Object(f["a"])(ke,_e,Ae,!1,null,"2c090320",null)),Ee=je.exports,Ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("admin-nav"),r("form",{staticClass:"container mb-5",attrs:{id:"form"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.addToProductSubmit(e)}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"Название продукта",required:"required"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"categoryId"}},[t._v("Категория")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.categoryId,expression:"product.categoryId"}],staticClass:"form-control",attrs:{name:"categoryId",id:"categoryId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"categoryId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:""}},[t._v("Пожалуйста, выберите")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"sellPrice"}},[t._v("Цена")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellPrice,expression:"product.sellPrice"}],staticClass:"form-control",attrs:{type:"text",name:"sellPrice",id:"sellPrice",placeholder:"Цена",required:"required"},domProps:{value:t.product.sellPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellPrice",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"description"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{name:"description",id:"description",cols:"120",rows:"3",placeholder:"Описание продукта"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._m(0)]),r("a",{staticClass:"btn btn-outline-success mx-3",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),r("button",{staticClass:"btn btn-outline-primary mx-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Новый товар")])])],1)},Re=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group col-md-12"},[r("div",{staticClass:"DashboardContainer",attrs:{name:"image"}})])}],Se=(r("bf8f"),r("b880")),$e=r.n(Se),De=r("ef92"),Ue=r.n(De),Ne={components:{adminNav:Vt},data:function(){return{uppy:null,product:{id:-1,name:"",categoryId:"",sellPrice:"",description:""},images:[],categories:[]}},mounted:function(){this.initUppy()},created:function(){this.fetchAdminCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing}},methods:{openUppyDashboard:function(){this.uppy.getPlugin("Dashboard").openModal()},initUppy:function(){var t=this;this.uppy=$e()({autoProceed:!1,debug:!0,restrictions:{maxFileSize:52428800,maxNumberOfFiles:10,minNumberOfFiles:1,allowedFileTypes:["image/*"]},meta:{modelId:this.modelId,collection:this.collection},onBeforeFileAdded:function(){Promise.resolve()},onBeforeUpload:function(e){t.files=e,Promise.resolve()}}).use(Ue.a,{trigger:".UppyModalOpenerBtn",inline:!0,target:".DashboardContainer",replaceTargetContent:!0,showProgressDetails:!0,note:"Images and video only, 1–10 files",height:470,metaFields:[{id:"name",name:"Name",placeholder:"file name"},{id:"caption",name:"Caption",placeholder:"describe what the image is about"}],browserBackButtonClose:!0}),this.uppy.on("complete",(function(e){t.files=e.successful}))},addToProductSubmit:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,this.product.name&&this.product.sellPrice&&this.product.description){n.next=4;break}return d["a"].fire({icon:"warning",title:"Пожалуйста заполните все поля"}),n.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),this.images=this.uppy.getFiles().map((function(t){return t.data})),e=t.target,r=new FormData(e),n.next=10,regeneratorRuntime.awrap(le.products.post({formData:r,images:this.images}));case 10:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i&&"success"===s.status){n.next=15;break}throw new Error(i);case 15:this.$store.dispatch("updateProcessing",!1),this.$router.push({name:"adminProducts"}),n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Неудачное создание товара"});case 23:case"end":return n.stop()}}),null,this,[[0,19]])},fetchAdminCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(le.categories.get());case 3:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=8;break}throw new Error(r);case 8:this.categories=e.categories,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"Не удалось получит список категорий"});case 14:case"end":return a.stop()}}),null,this,[[0,11]])}},beforeDestroy:function(){this.uppy.close()}},Le=Ne,Ke=Object(f["a"])(Le,Ie,Re,!1,null,null,null),Fe=Ke.exports,Te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"d-flex justify-content-center"},[r("form",{staticClass:"w-75 mt-4",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("div",{staticClass:"form-label-group mb-2"},[r("label",{staticClass:"d-flex",attrs:{for:"name"}},[t._v("Старый пароль:")]),r("ValidationProvider",{attrs:{rules:"required|password"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.usedPassword,expression:"usedPassword"}],staticClass:"form-control",attrs:{id:"used-password",name:"usedPassword",type:"password",placeholder:"Пожалуйста, введите текущий старый пароль",required:""},domProps:{value:t.usedPassword},on:{input:function(e){e.target.composing||(t.usedPassword=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}])})],1),r("div",{staticClass:"form-label-group mb-2"},[r("label",{staticClass:"d-flex",attrs:{for:"name"}},[t._v("Новый пароль:")]),r("ValidationProvider",{attrs:{rules:"required|password",vid:"newPassword"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],staticClass:"form-control",attrs:{id:"new-password",name:"newPassword",type:"password",placeholder:"Пожалуйста, установите новый пароль",required:""},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}])})],1),r("div",{staticClass:"form-label-group mb-2"},[r("label",{staticClass:"d-flex",attrs:{for:"name"}},[t._v("Подтверждение нового пароля:")]),r("ValidationProvider",{attrs:{rules:"required|confirmed:newPassword"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordCheck,expression:"passwordCheck"}],staticClass:"form-control",attrs:{id:"password-check",name:"passwordCheck",type:"password",placeholder:"Подтвердите новый пароль",required:""},domProps:{value:t.passwordCheck},on:{input:function(e){e.target.composing||(t.passwordCheck=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}])})],1),r("button",{staticClass:"btn btn-lg btn-outline-secondary btn-block btn-sm mb-3",attrs:{type:"submit"}},[t._v(t._s(t.isProcessing?"Изменение...":"Изменить пароль"))])])])])},Me=[],qe=r("7bb1"),Be={components:{ValidationProvider:qe["a"]},data:function(){return{usedPassword:"",newPassword:"",passwordCheck:""}},computed:{isProcessing:function(){return this.$store.state.isProcessing},formData:function(){var t=this.usedPassword,e=this.newPassword,r=this.passwordCheck;return{usedPassword:t,newPassword:e,passwordCheck:r}}},methods:{handleSubmit:function(){var t,e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(this.usedPassword&&this.newPassword&&this.passwordCheck){s.next=3;break}return d["a"].fire({icon:"warning",title:"Все поля обязательны к наполнению"}),s.abrupt("return");case 3:if(this.usedPassword!=this.newPassword){s.next=6;break}return d["a"].fire({icon:"warning",title:"Новый пароль не может совпадать со старым паролем"}),s.abrupt("return");case 6:if(this.newPassword===this.passwordCheck){s.next=9;break}return d["a"].fire({icon:"warning",title:"Новые пароли не совпадают"}),s.abrupt("return");case 9:return t=this.formData,s.prev=10,this.$store.dispatch("updateProcessing",!0),s.next=14,regeneratorRuntime.awrap(X.postPasswordChange({formData:t}));case 14:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a&&"success"===r.status){s.next=19;break}throw new Error(a);case 19:d["a"].fire({icon:"success",title:"Пароль успешно обновлен, пожалуйста, войдите с новым паролем"}),this.$router.push({name:"signIn"}),this.$store.dispatch("updateProcessing",!1),s.next=28;break;case 24:s.prev=24,s.t0=s["catch"](10),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Не удалось обновить пароль, пожалуйста, подтвердите, что пароль введен правильно"});case 28:case"end":return s.stop()}}),null,this,[[10,24]])}}},Qe=Be,Ye=Object(f["a"])(Qe,Te,Me,!1,null,null,null),ze=Ye.exports,Ge=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isLoading?r("div",[r("Spinner")],1):r("div",[r("div",{staticClass:"table-responsive-md container"},[r("h3",{staticClass:"text-left"},[t._v("Информация о продукте")]),r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",[t._v("Название")]),r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.product.name))]),r("td",[t._v("Категория")]),r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.product.category))])]),r("tr",[r("td",[t._v("Цена")]),r("td",[t._v(t._s(t.product.sellPrice))]),r("td",[t._v("Статус продукта")]),r("td",[t._v(t._s(t.product.status))])]),r("tr",[r("td",[t._v("Описание")]),r("td",{attrs:{colspan:"5"}},[t._v(t._s(t.product.description))])])])])]),r("div",{staticClass:"container adminProductImg"},[r("div",{staticClass:"row"},t._l(t.images,(function(t){return r("div",{key:t.id,staticClass:"col-md-3 mb-3"},[r("img",{attrs:{src:t.url,alt:""}})])})),0)]),r("div",{staticClass:"container my-5"},[r("div",{staticClass:"row justify-content-center"},[r("button",{staticClass:"btn btn-outline-success mx-3",on:{click:t.goToBack}},[t._v("Назад")]),r("router-link",{staticClass:"btn btn-outline-dark mx-3",attrs:{to:{name:"userProductEdit",params:{id:t.product.id}}}},[t._v("Изменить")])],1)])])])},Ze=[],Je={components:{Spinner:Ft},data:function(){return{product:{id:"",name:"",category:"",cost:0,sellPrice:0,status:0,description:""},images:[]}},created:function(){var t=this.$route.params.id;this.fetchAdminProduct(t)},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchAdminProduct(a),r()},computed:{isLoading:function(){return this.$store.state.isLoading}},methods:{fetchAdminProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateLoading",!0),s.next=4,regeneratorRuntime.awrap(X.products.getProductDetail({id:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a){s.next=9;break}throw new Error(a);case 9:this.product={id:r.product.id,name:r.product.name,category:r.product.category,cost:r.product.cost,sellPrice:r.product.sell_price,status:r.product.status,description:r.product.description},this.images=r.product.images,this.$store.dispatch("updateLoading",!1),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить детали продукта"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},goToBack:function(){this.$router.go(-1)}}},Ve=Je,We=(r("4dc6"),Object(f["a"])(Ve,Ge,Ze,!1,null,"6637b0d8",null)),He=We.exports,Xe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isLoading?r("div",[r("Spinner")],1):r("form",{staticClass:"container mb-5",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(t.$route.params.id)}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"Название товара",required:"required"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-4"},[r("label",{attrs:{for:"categoryId"}},[t._v("Категория")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.categoryId,expression:"product.categoryId"}],staticClass:"form-control",attrs:{name:"categoryId",id:"categoryId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"categoryId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:""}},[t._v("Пожалуйста, выберите")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"status"}},[t._v("Статус")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.status,expression:"product.status"}],staticClass:"form-control",attrs:{name:"status",id:"status"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"status",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"on"}},[t._v("Активно")]),r("option",{attrs:{value:"off"}},[t._v("Не активно")])])])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"originPrice"}},[t._v("Цена")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellPrice,expression:"product.sellPrice"}],staticClass:"form-control",attrs:{type:"text",name:"sellPrice",id:"sellPrice",placeholder:"Цена",required:"required"},domProps:{value:t.product.sellPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellPrice",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"description"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{name:"description",id:"description",cols:"120",rows:"3",placeholder:"Описание"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._m(0)]),r("div",{staticClass:"container adminProductImg"},[r("div",{staticClass:"row"},t._l(t.images,(function(e){return r("div",{key:e.id,staticClass:"prodcutImg col-md-3 mb-3"},[r("img",{attrs:{src:e.url,alt:""}}),r("div",{staticClass:"mask",attrs:{"data-imageId":e.id},on:{click:t.deleteImage}},[t._v("X")])])})),0)]),r("a",{staticClass:"btn btn-primary mx-3",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),r("button",{staticClass:"btn btn-outline-dark mx-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Подтвердить изменения")])])])},tr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"images"}},[t._v("Изображения продукта")]),r("input",{staticClass:"form-control",attrs:{type:"file",name:"images",id:"images",multiple:"multiple"}})])}],er={components:{Spinner:Ft},data:function(){return{product:{name:"",categoryId:"",sellPrice:0,status:"",description:""},images:[],categories:[]}},created:function(){var t=this.$route.params.id;this.fetchAdminProduct(t),this.fetchAdminCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing},isLoading:function(){return this.$store.state.isLoading}},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchAdminProduct(a),r()},methods:{fetchAdminProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateLoading",!0),s.next=4,regeneratorRuntime.awrap(X.products.getProductDetail({id:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(status);case 9:this.product={name:r.product.name,categoryId:r.product.CategoryId,sellPrice:r.product.sell_price,status:r.product.status,description:r.product.description},this.images=r.product.images,this.$store.dispatch("updateLoading",!1),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о товаре"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},fetchAdminCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,this.$store.dispatch("updateLoading",!0),a.next=4,regeneratorRuntime.awrap(X.categories.get());case 4:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=9;break}throw new Error(r);case 9:this.categories=e.categories,this.$store.dispatch("updateLoading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить категории"});case 17:case"end":return a.stop()}}),null,this,[[0,13]])},handleSubmit:function(t){var e,r,a,s,i,n;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,this.product.name&&this.product.sellPrice&&this.product.description){o.next=4;break}return d["a"].fire({icon:"warning",title:"Пожалуйста заполните все поля"}),o.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),e=window.event,r=e.target,a=new FormData(r),o.next=10,regeneratorRuntime.awrap(X.products.put({id:t,formData:a}));case 10:if(s=o.sent,i=s.data,n=s.statusText,"OK"===n&&"success"===i.status){o.next=15;break}throw new Error(n);case 15:this.$store.dispatch("updateProcessing",!1),this.$router.push({name:"userProducts"}),o.next=23;break;case 19:o.prev=19,o.t0=o["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Не удалось изменить информацию о продукте"});case 23:case"end":return o.stop()}}),null,this,[[0,19]])},deleteImage:function(t){var e,r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,e=t.target.dataset.imageid,i.next=4,regeneratorRuntime.awrap(X.products.deleteImage(e));case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=9;break}throw new Error(s);case 9:this.images.splice(this.images.indexOf(e),1),d["a"].fire({icon:"success",title:"Изображениеу удалено"}),i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](0),d["a"].fire({icon:"error",title:"Не удалось удалить картинку"});case 16:case"end":return i.stop()}}),null,this,[[0,13]])}}},rr=er,ar=(r("96d4"),Object(f["a"])(rr,Xe,tr,!1,null,"20bb4be0",null)),sr=ar.exports,ir=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{staticClass:"container mb-5",attrs:{id:"form"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.addToProductSubmit(e)}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"Название продукта",required:"required"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"categoryId"}},[t._v("Категория")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.categoryId,expression:"product.categoryId"}],staticClass:"form-control",attrs:{name:"categoryId",id:"categoryId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"categoryId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:""}},[t._v("Пожалуйста, выберите")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"sellPrice"}},[t._v("Цена")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellPrice,expression:"product.sellPrice"}],staticClass:"form-control",attrs:{type:"text",name:"sellPrice",id:"sellPrice",placeholder:"Цена",required:"required"},domProps:{value:t.product.sellPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellPrice",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"description"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{name:"description",id:"description",cols:"120",rows:"3",placeholder:"Описание продукта"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._m(0)]),r("a",{staticClass:"btn btn-outline-success mx-3",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),r("button",{staticClass:"btn btn-outline-primary mx-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Новый товар")])])])},nr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group col-md-12"},[r("div",{staticClass:"DashboardContainer",attrs:{name:"image"}})])}],or={data:function(){return{uppy:null,product:{id:-1,name:"",categoryId:"",sellPrice:"",description:""},images:[],categories:[]}},mounted:function(){this.initUppy()},created:function(){this.fetchAdminCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing}},methods:{openUppyDashboard:function(){this.uppy.getPlugin("Dashboard").openModal()},initUppy:function(){var t=this;this.uppy=$e()({autoProceed:!1,debug:!0,restrictions:{maxFileSize:52428800,maxNumberOfFiles:10,minNumberOfFiles:1,allowedFileTypes:["image/*"]},meta:{modelId:this.modelId,collection:this.collection},onBeforeFileAdded:function(){Promise.resolve()},onBeforeUpload:function(e){t.files=e,Promise.resolve()}}).use(Ue.a,{trigger:".UppyModalOpenerBtn",inline:!0,target:".DashboardContainer",replaceTargetContent:!0,showProgressDetails:!0,note:"Images and video only, 1–10 files",height:470,metaFields:[{id:"name",name:"Name",placeholder:"file name"},{id:"caption",name:"Caption",placeholder:"describe what the image is about"}],browserBackButtonClose:!0}),this.uppy.on("complete",(function(e){t.files=e.successful}))},addToProductSubmit:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,this.product.name&&this.product.sellPrice&&this.product.description){n.next=4;break}return d["a"].fire({icon:"warning",title:"Пожалуйста заполните все поля"}),n.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),this.images=this.uppy.getFiles().map((function(t){return t.data})),e=t.target,r=new FormData(e),n.next=10,regeneratorRuntime.awrap(X.products.post({formData:r,images:this.images}));case 10:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i&&"success"===s.status){n.next=15;break}throw new Error(i);case 15:this.$store.dispatch("updateProcessing",!1),this.$router.push({name:"userProducts"}),n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Неудачное создание товара"});case 23:case"end":return n.stop()}}),null,this,[[0,19]])},fetchAdminCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(X.categories.get());case 3:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=8;break}throw new Error(r);case 8:this.categories=e.categories,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"Не удалось получит список категорий"});case 14:case"end":return a.stop()}}),null,this,[[0,11]])}},beforeDestroy:function(){this.uppy.close()}},cr=or,ur=Object(f["a"])(cr,ir,nr,!1,null,null,null),dr=ur.exports,lr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("moderator-nav"),t.isLoading?r("div",[r("Spinner")],1):r("div",[r("div",{staticClass:"table-responsive-md container"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",[t._v("Название")]),r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.product.name))]),r("td",[t._v("Категория")]),r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.product.category))])]),r("tr",[r("td",[t._v("Цена")]),r("td",[t._v(t._s(t.product.sellPrice))]),r("td",[t._v("Статус продукта")]),r("td",[t._v(t._s(t.product.status))])]),r("tr",[r("td",[t._v("Описание")]),r("td",{attrs:{colspan:"5"}},[t._v(t._s(t.product.description))])])])])]),r("div",{staticClass:"container moderatorProductImg"},[r("div",{staticClass:"row"},t._l(t.images,(function(t){return r("div",{key:t.id,staticClass:"col-md-3 mb-3"},[r("img",{attrs:{src:t.url,alt:""}})])})),0)]),r("div",{staticClass:"container my-5"},[r("div",{staticClass:"row justify-content-center"},[r("button",{staticClass:"btn btn-outline-success mx-3",on:{click:t.goToBack}},[t._v("Назад")]),r("router-link",{staticClass:"btn btn-outline-dark mx-3",attrs:{to:{name:"moderatorProductEdit",params:{id:t.product.id}}}},[t._v("Изменить")])],1)])])],1)},pr=[],mr=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},gr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container pt-5"},[r("section",{staticClass:"breadcrumb-section set-bg",staticStyle:{"background-image":"url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISDw8QDw8PFRAVDw8NDw8PDw8PDw8PFRUWFhURFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDQ0OFQ8PFSsZFRktKysrLS0rLSsrLS0tKys3LSsrKy0tLSsrLS03LTc3Ky0rKy0rLTctKys3LS0tKy0tK//AABEIAKoBKQMBIgACEQEDEQH/xAAZAAADAQEBAAAAAAAAAAAAAAAAAQIDBAf/xAAuEAACAgAEBQMDBAMBAAAAAAAAAQIRAxIhMUFRYXGBkaHwEzKxBMHh8SJS0RT/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQIE/8QAGREBAQEAAwAAAAAAAAAAAAAAAAERAiFB/9oADAMBAAIRAxEAPwDy4ACzpYMEKx2AwEFkFAIYAArHYDAVhYFCCwAYCsLKGAiWyC7JbFYmwuHmCzJsaZTF2TJktktlxBJiSA2wY8SocMOu5dADMqmTJQMcUZaOiJFszkUIdCRaIM5EoqZnJlEzZA2IrNdYE5h5iKZUSLKugLolhnQkwGOybBsGKsLIzDbCqQyMxSYQ8oDsVgMAsCCkhNDsicihNkMlyC/QoucK4mYWACYmDYJWaZqsONv8nQKEaQGbVkUiZMozkyLAi0ZwZoyFSzObKkzGTKq4GhlgGrAzmYs1mZMQqRgFGkOxpjodEDT2ZcpkxQwAEMca4gSxNhYgCy4rmKMS2AmweKm9CJW9jWEQhoaQ0NkEsaE2Tm1ojS2yJMeLojnlLgy4hyYEN8iopmg7KUbKhhmlBNYSgbYUK14jSspi1ITZMdSZSNIKkZbEmYyZpJmTIRWFHWzSQQVIUmBlNmcipGczQ2/TLRs0kEI0kuhM2ZGWIzMqQQhZpBGNl/R6m0Y0gGowAmwsqrjKh2Z2FkF5gbJzFOLX8AAJE2OwjRCnIjMKUuhRphamphhzo2zWSi0JslyJlIijEkY57CVk5e3qWQtVOT4mcisvXTswcflF6RMWdWHJHLXzQdDUduYV2cmc6P02tsDYiTKkYzZluHhq2bMzwFuy5BPUTZnFW0VNhgLVhWzMpmkjKbIkZMvAW5nJl/puPg0N2Y4jNZHPNkioN8BbswOrCjSKyoAADisAGaxCAYDAIuU29/wSXhq3sTFTQZflnRiR02MZJrgIFXb1HXymCTHl6lxNCXykaRl80MlHr7GkZf41TIqZS3107shzXxMtQ4V7jUV09GxhrNNfKQX192aKPL8JBk5/kghfNH+4tuC9ka5Pm5SgXBzX09H/AMKyHWloDRByfSOnCjSEy2WpETZztmuLIyirZmNurCX+KJmxxZOIKkZyZf6d79zFihiU+nEquqZhNmrdo55EgTNcBqq47mIio6pS0OaQ4zHJASX9R8zMZUdUJ2irOfA3Nhg5crA0E5GkQMaS6j9QEOIF2EK3zYKI8o12IpfT6jUV1KQ2gEo9xqC5BGPctNE0Crl7BoLsFdCBPx5Y/miD0FXVlDHkJ1HmQA78BYyWlxCKiEmOOxGIyVqMMR6lYTrV9jNnTGGlCHKmnewNCcEtnRKb6suakuInExaOrMmY4i6EaRh4ldjZxvYwoqFrlQCkiWaziZ139AJY0x5TSMWtl5ZUZGmHhN9i02v6KWIBaVDJUgsDnvoIsCokChgJLoUhIYDHXcBoAQ33GkBFFCfShibCJSf+xpQB5AdA4hnQ1Iip8eoZRykKiomTfcaodpAlbWnUCmYYzN5nPjLUy1GeGtb0011NViviqXMvCw6XC+Y3iLZa9tTTNEWt7FLFXDXsZywb5LpuKUmtGvKLiKTbetL8jdGGe9kFc34RK1DnLqXhpLW0TpW2hnJJ7X4A3eJeyb/ARjzpdjO5LgH1uSKjeKXxkYmKkZ1e78IpKtkiKaxUxOa/oibXEiKfCwLd9vyFvmycz4oM4G4DEEAAIBgAFFIdkjsgqwZJSAVhY6E1RAmwa7jvoNrr6F0wUlr/AGGfkvUUq5fuGZ8V5/6MNWn2FJdTGU3z8IrCVAaRa5UaRZmybcdtV7jB0UZzwk9zB47ei/kylJvmyYq3d6PMuRpDGj2M8PFrR7DnUtotvnt7mkafVv7Y31eiIeG39z8LYWWUdtUP/wBHBJX14EGcsMhtm7w293fRaIUsOlsU1ivllJkNkkVbxO4t9xDTRA65Mlt8QbEBSouzIaYGlisix2B15RUVYgFQUMAhUFF5R5QqKGkXQmgEhiHYCHYgoImViT5lkSjyKSnYnJ/wTYwoj2DOu3NMCZdfDKyee/tXl6I0gnxfjkZRk1Se3NFLFvRLyxhqcWGt+6MsS6/fidGS/ufhaIWLh8gOdR8m2HOuKozr1JrmMV1fWXBW/YmWE5fdXgiEq7GrxFzGIxcZR21RDk3u/B0Zm+iMsWHrzKMlEcl1JYJEaIKGMgQi2uRADsZIEAABQHaAAAWMQUEOx2IAHYCGFAMGIIaGSOygaFZViaBiZRszLYPUqamwsTQrI0pdPQlx4rR8hlKXP1NaziVjVutS6b40iZw/si2uwRo8JGLRcv1Bi22RqG0VCVEoY0xt9QzxMQzY0UxLCimTZlRY7JbAaHmEAEAAAACoYAdoAAAAAADEAQwGAUmAMRUMBDQAOxAA2RJFAxBnYmgmETSQAJgRVKQ9CAAbw1Y3FAJ7BEtColDYsWEyQYkRQxDEwAAAgAAAAAAAABgf/9k=)"},attrs:{"data-setbg":"img/breadcrumb.jpg"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12 text-center"},[r("div",{staticClass:"breadcrumb__text"},[r("h2",[t._v("Панель модератора")])])])])])]),r("p")])}],vr={},fr=Object(f["a"])(vr,mr,gr,!1,null,null,null),hr=fr.exports,br={components:{moderatorNav:hr,Spinner:Ft},data:function(){return{product:{id:"",name:"",category:"",cost:0,sellPrice:0,status:0,description:""},images:[]}},created:function(){var t=this.$route.params.id;this.fetchModeratorProduct(t)},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchModeratorProduct(a),r()},computed:{isLoading:function(){return this.$store.state.isLoading}},methods:{fetchModeratorProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateLoading",!0),s.next=4,regeneratorRuntime.awrap(le.products.getProductDetail({id:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a){s.next=9;break}throw new Error(a);case 9:this.product={id:r.product.id,name:r.product.name,category:r.product.category,cost:r.product.cost,sellPrice:r.product.sell_price,status:r.product.status,description:r.product.description},this.images=r.product.images,this.$store.dispatch("updateLoading",!1),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить детали продукта, попробуйте немного позже"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},goToBack:function(){this.$router.go(-1)}}},wr=br,yr=(r("1176"),Object(f["a"])(wr,lr,pr,!1,null,"7f0547a8",null)),Pr=yr.exports,Cr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("moderator-nav"),t.isLoading?r("div",[r("Spinner")],1):r("form",{staticClass:"container mb-5",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(t.$route.params.id)}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"Название продукта",required:"required"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-4"},[r("label",{attrs:{for:"categoryId"}},[t._v("Категория")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.categoryId,expression:"product.categoryId"}],staticClass:"form-control",attrs:{name:"categoryId",id:"categoryId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"categoryId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:""}},[t._v("Пожалуйста, выберите")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"status"}},[t._v("Статус")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.status,expression:"product.status"}],staticClass:"form-control",attrs:{name:"status",id:"status"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"status",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"on"}},[t._v("Активно")]),r("option",{attrs:{value:"off"}},[t._v("Не активно")])])])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"originPrice"}},[t._v("Цена")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellPrice,expression:"product.sellPrice"}],staticClass:"form-control",attrs:{type:"text",name:"sellPrice",id:"sellPrice",placeholder:"Цена",required:"required"},domProps:{value:t.product.sellPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellPrice",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"description"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{name:"description",id:"description",cols:"120",rows:"3",placeholder:"Описание"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._m(0)]),r("div",{staticClass:"container moderatorProductImg"},[r("div",{staticClass:"row"},t._l(t.images,(function(e){return r("div",{key:e.id,staticClass:"prodcutImg col-md-3 mb-3"},[r("img",{attrs:{src:e.url,alt:""}}),r("div",{staticClass:"mask",attrs:{"data-imageId":e.id},on:{click:t.deleteImage}},[t._v("X")])])})),0)]),r("a",{staticClass:"btn btn-primary mx-3",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),r("button",{staticClass:"btn btn-outline-dark mx-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Подтвердить изменения")])])],1)},xr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"images"}},[t._v("Изображения продукта")]),r("input",{staticClass:"form-control",attrs:{type:"file",name:"images",id:"images",multiple:"multiple"}})])}],_r={components:{moderatorNav:hr,Spinner:Ft},data:function(){return{product:{name:"",categoryId:"",sellPrice:0,status:"",description:""},images:[],categories:[]}},created:function(){var t=this.$route.params.id;this.fetchAdminProduct(t),this.fetchAdminCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing},isLoading:function(){return this.$store.state.isLoading}},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchAdminProduct(a),r()},methods:{fetchAdminProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateLoading",!0),s.next=4,regeneratorRuntime.awrap(le.products.getProductDetail({id:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(status);case 9:this.product={name:r.product.name,categoryId:r.product.CategoryId,sellPrice:r.product.sellPrice,status:r.product.status,description:r.product.description},this.images=r.product.images,this.$store.dispatch("updateLoading",!1),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о продукте, попробуйте позже"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},fetchAdminCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,this.$store.dispatch("updateLoading",!0),a.next=4,regeneratorRuntime.awrap(le.categories.get());case 4:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=9;break}throw new Error(r);case 9:this.categories=e.categories,this.$store.dispatch("updateLoading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию категории, попробуйте позже"});case 17:case"end":return a.stop()}}),null,this,[[0,13]])},handleSubmit:function(t){var e,r,a,s,i,n;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,this.product.name&&this.product.sellPrice&&this.product.description){o.next=4;break}return d["a"].fire({icon:"warning",title:"Пожалуйста, заполните все поля"}),o.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),e=window.event,r=e.target,a=new FormData(r),o.next=10,regeneratorRuntime.awrap(le.products.put({id:t,formData:a}));case 10:if(s=o.sent,i=s.data,n=s.statusText,"OK"===n&&"success"===i.status){o.next=15;break}throw new Error(n);case 15:this.$store.dispatch("updateProcessing",!1),this.$router.push({name:"moderatorProducts"}),o.next=23;break;case 19:o.prev=19,o.t0=o["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Изменить информацию не удалось, попробуйте позже"});case 23:case"end":return o.stop()}}),null,this,[[0,19]])},deleteImage:function(t){var e,r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,e=t.target.dataset.imageid,i.next=4,regeneratorRuntime.awrap(le.products.deleteImage(e));case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=9;break}throw new Error(s);case 9:this.images.splice(this.images.indexOf(e),1),d["a"].fire({icon:"success",title:"Изображения успешно удалены!"}),i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](0),d["a"].fire({icon:"error",title:"Удалить изображения не удалось, попробуйте немного позже"});case 16:case"end":return i.stop()}}),null,this,[[0,13]])}}},Ar=_r,Or=(r("783a"),Object(f["a"])(Ar,Cr,xr,!1,null,"62a9890e",null)),kr=Or.exports,jr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("moderator-nav"),r("form",{staticClass:"container mb-5",attrs:{id:"form"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.addToProductSubmit(e)}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"name"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"Название продукта",required:"required"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"categoryId"}},[t._v("Категория")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.categoryId,expression:"product.categoryId"}],staticClass:"form-control",attrs:{name:"categoryId",id:"categoryId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"categoryId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:""}},[t._v("Пожалуйста, выберите")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"sellPrice"}},[t._v("Цена")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellPrice,expression:"product.sellPrice"}],staticClass:"form-control",attrs:{type:"text",name:"sellPrice",id:"sellPrice",placeholder:"Цена",required:"required"},domProps:{value:t.product.sellPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellPrice",e.target.value)}}})]),r("div",{staticClass:"form-group col-md-12"},[r("label",{attrs:{for:"description"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{name:"description",id:"description",cols:"120",rows:"3",placeholder:"Описание продукта"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._m(0)]),r("a",{staticClass:"btn btn-outline-success mx-3",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),r("button",{staticClass:"btn btn-outline-primary mx-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Новый товар")])])],1)},Er=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group col-md-12"},[r("div",{staticClass:"DashboardContainer",attrs:{name:"image"}})])}],Ir={components:{moderatorNav:hr},data:function(){return{uppy:null,product:{id:-1,name:"",categoryId:"",sellPrice:"",description:""},images:[],categories:[]}},mounted:function(){this.initUppy()},created:function(){this.fetchModeratorCategories()},computed:{isProcessing:function(){return this.$store.state.isProcessing}},methods:{openUppyDashboard:function(){this.uppy.getPlugin("Dashboard").openModal()},initUppy:function(){var t=this;this.uppy=$e()({autoProceed:!1,debug:!0,restrictions:{maxFileSize:52428800,maxNumberOfFiles:10,minNumberOfFiles:1,allowedFileTypes:["image/*"]},meta:{modelId:this.modelId,collection:this.collection},onBeforeFileAdded:function(){Promise.resolve()},onBeforeUpload:function(e){t.files=e,Promise.resolve()}}).use(Ue.a,{trigger:".UppyModalOpenerBtn",inline:!0,target:".DashboardContainer",replaceTargetContent:!0,showProgressDetails:!0,note:"Images and video only, 1–10 files",height:470,metaFields:[{id:"name",name:"Name",placeholder:"file name"},{id:"caption",name:"Caption",placeholder:"describe what the image is about"}],browserBackButtonClose:!0}),this.uppy.on("complete",(function(e){t.files=e.successful}))},addToProductSubmit:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,this.product.name&&this.product.sellPrice&&this.product.description){n.next=4;break}return d["a"].fire({icon:"warning",title:"Пожалуйста заполните все поля"}),n.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),this.images=this.uppy.getFiles().map((function(t){return t.data})),e=t.target,r=new FormData(e),n.next=10,regeneratorRuntime.awrap(le.products.post({formData:r,images:this.images}));case 10:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i&&"success"===s.status){n.next=15;break}throw new Error(i);case 15:this.$store.dispatch("updateProcessing",!1),this.$router.push({name:"moderatorProducts"}),n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Неудачное создание товара"});case 23:case"end":return n.stop()}}),null,this,[[0,19]])},fetchModeratorCategories:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(le.categories.get());case 3:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=8;break}throw new Error(r);case 8:this.categories=e.categories,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"Не удалось получит список категорий"});case 14:case"end":return a.stop()}}),null,this,[[0,11]])}},beforeDestroy:function(){this.uppy.close()}},Rr=Ir,Sr=Object(f["a"])(Rr,jr,Er,!1,null,null,null),$r=Sr.exports,Dr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[t._m(0),r("header",{attrs:{id:"header"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("moderatorNav")],1)])]),r("section",{attrs:{id:"main"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("a",{staticClass:"nav-main-color list-group-item textac",staticStyle:{color:"white"}},[t._v(" Навигация ")]),r("a",{staticClass:"nav-item list-group-item list-group-item-action textac"},[r("router-link",{attrs:{to:{name:"moderatorProducts"}}},[t._v("Товары")])],1),r("p")]),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"panel panel-default "},[r("div",{staticClass:"panel-heading main-color-bg"}),r("div",{staticClass:"panel-body"},[r("div",{staticClass:"table-responsive-md"},[r("table",{staticClass:"table table-striped"},[t._m(1),r("tbody",t._l(t.products,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("router-link",{attrs:{to:{name:"adminProduct",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.category))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.sell_price))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.status))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("router-link",{staticClass:"btn btn-outline-dark",attrs:{to:{name:"moderatorProductEdit",params:{id:e.id}}}},[t._v("Изменить")])],1),r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.deleteProduct(e.id)}}},[t._v("Удалить")])])])})),0)]),t.totalPage>1?r("nav",{attrs:{"aria-label":"Page navigation"}},[r("ul",{staticClass:"pagination"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"adminProducts",query:{page:t.previousPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return r("li",{key:e,class:["page-item",{active:t.currentPage===e}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminProducts",query:{page:e}}}},[t._v(t._s(e))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminProducts",query:{page:t.nextPage}},"aria-label":"Next"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)]):t._e()])])])])])])])])])},Ur=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-default"},[r("div",{staticClass:"container"},[r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"myNavbar"}},[r("ul",{staticClass:"nav navbar-nav navbar-block navbar-left"},[r("li",[r("a",[t._v("Dashboard")])]),r("li",[r("a",[t._v("Pages")])]),r("li",[r("a",[t._v("Posts")])]),r("li",[r("a",[t._v("Users")])])]),r("ul",{staticClass:"nav navbar-nav navbar-block navbar-right"},[r("li",[r("a",[t._v("Welcome, User")])]),r("li",[r("a",[t._v("Logout")])])])])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Название")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Категория")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Цена")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Статус")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Редактировать")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Удалить")])])])}];function Nr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Lr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nr(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Kr={components:{moderatorNav:hr},data:function(){return{products:[],currentPage:0,totalPage:0}},computed:Lr({},Object(u["b"])(["currentUser"]),{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1},isLoading:function(){return this.$store.state.isLoading}}),created:function(){var t=this.$route.query.page;this.fetchModeratorProducts({page:t})},beforeRouteUpdate:function(t,e,r){var a=t.query.page;this.fetchModeratorProducts({page:a}),r()},methods:{deleteProduct:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,this.$store.dispatch("updateProcessing",!0),s.next=4,regeneratorRuntime.awrap(le.products.delete({productId:t}));case 4:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a||"success"===r.status){s.next=9;break}throw new Error(a);case 9:this.products=this.products.filter((function(e){return e.id!==t})),this.$store.dispatch("updateProcessing",!1),s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](0),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Продукт не может быть удален"});case 17:case"end":return s.stop()}}),null,this,[[0,13]])},fetchModeratorProducts:function(t){var e,r,a,s,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.page,r=void 0===e?1:e,n.prev=1,this.$store.dispatch("updateLoading",!0),n.next=5,regeneratorRuntime.awrap(le.products.get({page:r}));case 5:if(a=n.sent,s=a.data,i=a.statusText,"OK"===i){n.next=10;break}throw new Error(i);case 10:this.products=s.products,this.currentPage=s.page,this.totalPage=s.totalPage.length,this.$store.dispatch("updateLoading",!1),n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](1),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Невозможно получить информацию о продуктах, попробуйте позже"});case 20:case"end":return n.stop()}}),null,this,[[1,16]])}}},Fr=Kr,Tr=Object(f["a"])(Fr,Dr,Ur,!1,null,null,null),Mr=Tr.exports,qr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[[r("div",[r("div",[t._m(0),r("header",{attrs:{id:"header"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("adminNav")],1)])]),r("section",{attrs:{id:"main"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("adminNavigation")],1),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"panel panel-default "},[r("div",{staticClass:"panel-heading main-color-bg"}),r("div",{staticClass:"panel-body"},[r("div",{staticClass:"table-responsive-md"},[r("table",{staticClass:"table table-striped"},[t._m(1),r("tbody",t._l(t.users,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.name))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.lastname))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[t._v(t._s(e.email))]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"user.isEditing"}]},[r("div",{staticClass:"input-group"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"user.role"}],staticClass:"custom-select",on:{change:function(r){var a=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"role",r.target.multiple?a:a[0])}}},[r("option",[t._v("user")]),r("option",[t._v("moderator")]),r("option",[t._v("admin")])])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditing,expression:"!user.isEditing"}]},[t._v(t._s(e.role))])]),r("td",{staticClass:"textac",attrs:{scope:"col"}},[e.isSelf?r("div"):r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"user.isEditing"}]},[r("button",{staticClass:"btn btn-outline-dark btn-sm",on:{click:function(r){return t.updateUserRole(e.id)}}},[t._v("Done")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditing,expression:"!user.isEditing"}]},[r("button",{staticClass:"btn btn-outline-dark btn-sm",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.editUserRole(e.id)}}},[t._v("Edit")])])])])])})),0)]),t.totalPage>1?r("nav",{attrs:{"aria-label":"Page navigation"}},[r("ul",{staticClass:"pagination"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:"adminUsers",query:{page:t.previousPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return r("li",{key:e,class:["page-item",{active:t.currentPage===e}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminUsers",query:{page:e}}}},[t._v(t._s(e))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"adminUsers",query:{page:t.nextPage}},"aria-label":"Next"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)]):t._e()])])])])])])])])])]],2)},Br=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-default"},[r("div",{staticClass:"container"},[r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"myNavbar"}},[r("ul",{staticClass:"nav navbar-nav navbar-block navbar-left"},[r("li",[r("a",[t._v("Dashboard")])]),r("li",[r("a",[t._v("Pages")])]),r("li",[r("a",[t._v("Posts")])]),r("li",[r("a",[t._v("Users")])])]),r("ul",{staticClass:"nav navbar-nav navbar-block navbar-right"},[r("li",[r("a",[t._v("Welcome, User")])]),r("li",[r("a",[t._v("Logout")])])])])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Имя")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Фамилия")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Email")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Роль")]),r("th",{staticClass:"textac",attrs:{scope:"col"}},[t._v("Управление ролью")])])])}];function Qr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Yr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qr(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var zr={components:{adminNav:Vt,adminNavigation:re},data:function(){return{users:[],currentPage:0,totalPage:0}},created:function(){var t=this.$route.query.page;this.fetchUsers({page:t})},beforeRouteUpdate:function(t,e,r){var a=t.query.page;this.fetchUsers({page:a}),r()},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1},isLoading:function(){return this.$store.state.isLoading}},methods:{fetchUsers:function(t){var e,r,a,s,i,n=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return e=t.page,r=void 0===e?1:e,o.prev=1,this.$store.dispatch("updateLoading",!0),o.next=5,regeneratorRuntime.awrap(Wt.users.get({page:r}));case 5:if(a=o.sent,s=a.data,i=a.statusText,console.log(s),"OK"===i){o.next=11;break}throw new Error(i);case 11:this.users=s.users.rows,this.users=this.users.map((function(t){return t.id==n.$store.state.currentUser.id?Yr({},t,{isEditing:!1,isSelf:!0}):Yr({},t,{isEditing:!1,isSelf:!1})})),console.log(11,this.users),this.currentPage=s.page,this.totalPage=s.totalPage.length,this.$store.dispatch("updateLoading",!1),o.next=23;break;case 19:o.prev=19,o.t0=o["catch"](1),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Не получается получить информацию"});case 23:case"end":return o.stop()}}),null,this,[[1,19]])},editUserRole:function(t){this.users=this.users.map((function(e){return e.id===t?Yr({},e,{isEditing:!0}):e}))},updateUserRole:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e="",this.users=this.users.map((function(r){return r.id===t?(e=r.role,Yr({},r,{isEditing:!1})):r})),s.next=4,regeneratorRuntime.awrap(Wt.users.putUser({id:t,role:e}));case 4:r=s.sent,a=r.statusText,"OK"===a&&d["a"].fire({type:"success",title:"Роль обновлена！"}),this.fetchUsers();case 8:case"end":return s.stop()}}),null,this)}}},Gr=zr,Zr=Object(f["a"])(Gr,qr,Br,!1,null,null,null),Jr=Zr.exports,Vr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"d-flex justify-content-center"},[r("form",{staticClass:"w-75 mt-4",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("div",{staticClass:"form-label-group mb-2"},[r("label",{staticClass:"d-flex",attrs:{for:"name"}},[t._v("Имя пользователя:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",placeholder:"Enter name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{staticClass:"d-flex",attrs:{for:"email"}},[t._v("Email:")]),r("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}])}),r("small",{staticClass:"text-muted"},[t._v("＊ Напоминание: электронная почта - это учетная запись пользователя и контактный почтовый ящик.")])],1),r("button",{staticClass:"btn btn-lg btn-outline-secondary btn-block btn-sm mb-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(t._s(t.isProcessing?"Изменение...":"Обновить информацию о пользователе"))])])])])},Wr=[];function Hr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Xr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hr(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ta={components:{ValidationProvider:qe["a"]},data:function(){return{id:0,name:"",email:""}},computed:Xr({},Object(u["b"])(["currentUser","isProcessing"]),{formData:function(){var t=this.id,e=this.name,r=this.email;return{id:t,name:e,email:r}}}),watch:{currentUser:function(){this.setUser()}},created:function(){this.setUser()},methods:{setUser:function(){this.id=this.currentUser.id,this.name=this.currentUser.name,this.email=this.currentUser.email},handleSubmit:function(){var t,e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(this.email===this.currentUser.email.toString()){s.next=3;break}return d["a"].fire({icon:"warning",title:"Ошибка"}),s.abrupt("return");case 3:return t=this.formData,s.prev=4,this.$store.dispatch("updateProcessing",!0),s.next=8,regeneratorRuntime.awrap(X.putUser({formData:t}));case 8:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a&&"success"===r.status){s.next=13;break}throw new Error(a);case 13:return d["a"].fire({icon:"success",title:"Данные пользователя успешно обновлены"}),s.next=16,regeneratorRuntime.awrap(this.$store.dispatch("updateCurrentUser",t));case 16:this.$router.push({name:"userEdit"}),this.$store.dispatch("updateProcessing",!1),s.next=24;break;case 20:s.prev=20,s.t0=s["catch"](4),this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Невозможно обновить информацию о пользователе, повторите попытку позже."});case 24:case"end":return s.stop()}}),null,this,[[4,20]])}}},ea=ta,ra=Object(f["a"])(ea,Vr,Wr,!1,null,null,null),aa=ra.exports,sa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[0==t.products.length?r("div",[r("h3",{staticClass:"mt-4"},[t._v("Вы еще не добавили ни один товар в список желаний")])]):r("div",{staticClass:"row"},t._l(t.products,(function(e){return r("productCard",{key:e.id,attrs:{"initial-product":e,"card-height":t.productCardHeight}})})),1)])},ia=[];function na(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?na(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ca={components:{productCard:R["a"]},data:function(){return{isLoading:!1,productCardHeight:31.5}},computed:oa({},Object(u["b"])(["currentUser"]),{products:function(){return this.$store.state.wishList}}),created:function(){this.fetchUserFavorite()},beforeRouteUpdate:function(t,e,r){this.fetchUserFavorite(),r()},methods:{fetchUserFavorite:function(){this.$store.dispatch("fetchUserFavorite")}}},ua=ca,da=Object(f["a"])(ua,sa,ia,!1,null,null,null),la=da.exports,pa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("body",[r("div",{staticClass:"container"},[r("div",{staticClass:"messaging"},[r("p"),r("div",{staticClass:"inbox_msg"},[r("div",{staticClass:"inbox_people"},[t._m(0),r("div",{staticClass:"inbox_chat"},t._l(t.rooms,(function(e){return r("div",{key:e.id,staticClass:"chat_list"},[r("div",{staticClass:"chat_people"},[r("div",{staticClass:"chat_img"},[r("img",{attrs:{src:e.ProductImage,alt:"sunil"}})]),r("router-link",{attrs:{to:{name:"userRoom",params:{id:e.id}}}},[r("div",{staticClass:"chat_ib"},[r("h5",[t._v(" "+t._s(null!=e.Product?e.Product.User.name:"Продукт")+" "+t._s(null!=e.Product?e.Product.User.lastname:"удален")),r("span",{staticClass:"chat_date"},[t._v(t._s(t._f("fromNow")(e.createdAt)))])]),r("p",[t._v(t._s(null!=e.Product?e.Product.name:"Продукт удален"))])])])],1)])})),0)])])])])])},ma=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"headind_srch"},[r("div",{staticClass:"textac"},[r("h4",[t._v("Диалоги")])]),r("div",{staticClass:"srch_bar"})])}],ga={addRoom:function(t){var e=t.productId;return d["b"].post("/products/".concat(e,"/room"),null)},getRooms:function(){return d["b"].get("/users/rooms/",null)},getRoom:function(t){var e=t.roomId;return d["b"].get("/users/rooms/".concat(e))},create:function(t){var e=t.roomId,r=t.text;return d["b"].post("/comments",{roomId:e,text:r})}};function va(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function fa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?va(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):va(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ha={mixins:[jt["b"]],data:function(){return{rooms:[],cardImg:"",isLoading:!1}},computed:fa({},Object(u["b"])(["currentUser"])),created:function(){this.fetchRooms()},beforeRouteUpdate:function(t,e,r){this.fetchUserFavorite(),r()},methods:{fetchRooms:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,this.$store.dispatch("updateLoading",!0),a.next=4,regeneratorRuntime.awrap(ga.getRooms());case 4:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=9;break}throw new Error(r);case 9:this.rooms=e.rooms,this.$store.dispatch("updateLoading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),this.$store.dispatch("updateLoading",!1),d["a"].fire({icon:"error",title:"Не получается получить информацию о продукте, пожалуйста, попробуйте снова позже"});case 17:case"end":return a.stop()}}),null,this,[[0,13]])}}},ba=ha,wa=(r("7292"),Object(f["a"])(ba,pa,ma,!1,null,null,null)),ya=wa.exports,Pa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[t.isLoading?r("Spinner"):[r("body",[r("div",{staticClass:"container"},[r("h3",{staticClass:" text-center"}),r("div",{staticClass:"messaging"},[r("div",{staticClass:"inbox_msg"},[r("div",{staticClass:"inbox_people"},[r("div",{staticClass:"headind_srch"},[r("div",{staticClass:"recent_heading"},[r("h4",[r("a",{attrs:{href:"#"},on:{click:function(e){return t.$router.back()}}},[t._v("Назад")])])]),r("div",{staticClass:"srch_bar"})]),r("div",{staticClass:"inbox_chat"},[r("div",{staticClass:"chat_list active_chat"},[r("div",{staticClass:"chat_people"},[r("div",{staticClass:"chat_img"},[r("img",{attrs:{src:t.roomImage,alt:"sunil"}})]),r("div",{staticClass:"chat_ib"},[r("h5",[t._v(t._s(null!=t.room.Product?t.room.Product.User.name:"Продукт")+" "+t._s(null!=t.room.Product?t.room.Product.User.lastname:"удален")+" "),r("span",{staticClass:"chat_date"},[t._v(t._s(t._f("fromNow")(t.room.createdAt)))])]),r("p",[t._v(t._s(null!=t.room.Product?t.room.Product.name:"Продукт удален"))])])])]),r("RoomMessages",{attrs:{"room-messages":t.roomMessages},on:{"after-delete-message":t.afterDeleteMessage}})],1),r("div",{staticClass:"ml-2 mr-2 mt-2"},[r("div",{staticClass:"type_msg"},[r("div",{staticClass:"input_msg_write"},[r("CreateMessage",{attrs:{"room-id":t.room.id},on:{"after-create-message":t.afterCreateMessage}})],1)])])])])])])])]],2)},Ca=[],xa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.RoomMessages,(function(e){return r("div",{key:e.id},[r("div",{staticClass:"mesg ml-2 mt-2 mr-2 mb-2"},[r("div",[t.currentUser.id!=e.UserId?[r("div",{staticClass:"incoming_msg"},[r("div",{staticClass:"received_msg"},[r("div",{staticClass:"received_withd_msg"},[t._v(" "+t._s(e.User.name)+" "),r("p",[t._v(t._s(e.text))]),r("span",{staticClass:"time_date"},[t._v(" "+t._s(t._f("fromNow")(e.createdAt)))])])])])]:[r("div",{staticClass:"outgoing_msg"},[r("div",{staticClass:"sent_msg"},[t._v(" "+t._s(e.User.name)+" "),r("p",[t._v(t._s(e.text))]),r("span",{staticClass:"time_date"},[t._v(" "+t._s(t._f("fromNow")(e.createdAt)))])])])]],2)]),r("a")])})),0)},_a=[];function Aa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Aa(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ka={mixins:[jt["b"]],props:{RoomMessages:{type:Array,required:!0}},computed:Oa({},Object(u["b"])(["currentUser"]))},ja=ka,Ea=(r("05d1"),Object(f["a"])(ja,xa,_a,!1,null,"360fe2a6",null)),Ia=Ea.exports,Ra=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("div",{staticClass:"form-group mb-4"},[r("label",{attrs:{for:"text"}},[t._v("Оставьте сообщение: ")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{rows:"3",name:"text"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),r("div",{staticClass:"d-flex align-items-center justify-content-between"},[r("button",{staticClass:"btn btn-primary mr-0 mb-4",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Отправить")])])])},Sa=[],$a={create:function(t){var e=t.roomId,r=t.text;return d["b"].post("/messages",{roomId:e,text:r})},delete:function(t){var e=t.commentId;return d["b"].delete("/messages/".concat(e))}};function Da(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ua(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Da(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Na={props:{roomId:{type:Number,required:!0}},data:function(){return{text:"",isProcessing:!1}},computed:Ua({},Object(u["b"])(["currentUser"])),methods:{handleSubmit:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,this.text){a.next=4;break}return d["a"].fire({type:"warning",title:"Вы не заполнили поле сообщения"}),a.abrupt("return");case 4:return this.isProcessing=!0,a.next=7,regeneratorRuntime.awrap($a.create({roomId:this.roomId,text:this.text}));case 7:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r&&"success"===e.status){a.next=12;break}throw new Error(r);case 12:this.$emit("after-create-message",{User:{id:this.currentUser.id,name:this.currentUser.name,lastname:this.currentUser.lastname},messageId:e.messageId,roomId:this.roomId,text:this.text,UserId:this.currentUser.id}),this.isProcessing=!1,this.text="",a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](0),this.isProcessing=!1,d["a"].fire({type:"error",title:"Не получилось отправить сообщение, пожалуйста, попробуйте снова позже"});case 21:case"end":return a.stop()}}),null,this,[[0,17]])}}},La=Na,Ka=(r("656c"),Object(f["a"])(La,Ra,Sa,!1,null,"5c7015b8",null)),Fa=Ka.exports;function Ta(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ta(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qa={mixins:[jt["b"]],components:{RoomMessages:Ia,CreateMessage:Fa,Spinner:Ft},data:function(){return{room:{id:-1,createdAt:""},roomMessages:[],isLoading:!0}},computed:Ma({},Object(u["b"])(["currentUser"])),created:function(){var t=this.$route.params.id;console.log("11111111 search bug: ",this.currentUser.id),this.fetchRoom(t)},beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchRoom(a),r()},methods:{fetchRoom:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,regeneratorRuntime.awrap(ga.getRoom({roomId:t}));case 3:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a){s.next=8;break}throw new Error(a);case 8:this.room=r.room,this.roomImage=null!=r.room.Product?r.room.Product.Images[0].url:"https://dere.shikimori.one/system/clubs/main/2189.png?1576510376",this.roomMessages=r.room.Messages,this.isLoading=!1,s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),this.isLoading=!1,d["a"].fire({type:"error",title:"Невозможно получить информацию о диалоге, пожалуйста, попробуйте снова позже"});case 18:case"end":return s.stop()}}),null,this,[[0,14]])},afterDeleteMessage:function(t){this.roomMessages=this.roomMessages.filter((function(e){return e.id!==t}))},afterCreateMessage:function(t){var e=t.messageId,r=t.roomId,a=t.text;this.roomMessages.push({id:e,RoomId:r,User:{id:this.currentUser.id,name:this.currentUser.name,lastname:this.currentUser.lastname},text:a,createdAt:new Date,UserId:this.currentUser.id})}}},Ba=qa,Qa=Object(f["a"])(Ba,Pa,Ca,!1,null,null,null),Ya=Qa.exports,za=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container py-5"},[r("div",{staticClass:"breadcrumb-area"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"breadcrumb-wrap"},[r("nav",{attrs:{"aria-label":"breadcrumb"}},[r("div",{staticClass:"breadcrumb-title"},[t._v("Вход / Регистрация")]),r("ul",{staticClass:"breadcrumb"},[r("li",{staticClass:"breadcrumb-item"},[r("router-link",{attrs:{to:{name:"index"}}},[t._v("Главная")])],1),r("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Вход - Регистрация")])])])])])])])]),r("div",{staticClass:"login-register-wrapper pt-68 pb-6 pt-sm-50 ",staticStyle:{"margin-top":"30px"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"member-area-from-wrap"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6"},[r("form",{staticClass:"login-reg-form-wrap  pr-lg-50",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmitSignIn(e)}}},[r("h2",{staticClass:"textac"},[t._v("Вход")]),r("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",name:"email",placeholder:"Введите email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("ValidationProvider",{attrs:{rules:"required|password"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",placeholder:"Введите пароль",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("div",{staticClass:"w-100"},[r("button",{staticClass:"single-input-item btn btn-lg btn-outline-secondary btn-block btn-sm mb-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Вход")])])],1)]),r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"login-reg-form-wrap signup-form"},[r("h2",{staticClass:"textac"},[t._v("Регистрация")]),r("form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmitSignUp(e)}}},[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerName,expression:"registerName"}],attrs:{id:"name",name:"name",type:"text",placeholder:"Введите имя",required:""},domProps:{value:t.registerName},on:{input:function(e){e.target.composing||(t.registerName=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerLastname,expression:"registerLastname"}],attrs:{id:"lastname",name:"lastname",type:"text",placeholder:"Введите фамилию",required:""},domProps:{value:t.registerLastname},on:{input:function(e){e.target.composing||(t.registerLastname=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerEmail,expression:"registerEmail"}],attrs:{name:"email",type:"email",placeholder:"Введите email",required:""},domProps:{value:t.registerEmail},on:{input:function(e){e.target.composing||(t.registerEmail=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("ValidationProvider",{attrs:{rules:"required|password",vid:"registerPassword"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerPassword,expression:"registerPassword"}],attrs:{id:"register-password",name:"register-password",type:"password",placeholder:"Введите пароль",required:""},domProps:{value:t.registerPassword},on:{input:function(e){e.target.composing||(t.registerPassword=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("ValidationProvider",{attrs:{rules:"required|confirmed:registerPassword"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"single-input-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerPasswordCheck,expression:"registerPasswordCheck"}],attrs:{id:"register-password-check",name:"register-password-check",type:"password",placeholder:"Подтвердите пароль",required:""},domProps:{value:t.registerPasswordCheck},on:{input:function(e){e.target.composing||(t.registerPasswordCheck=e.target.value)}}}),r("span",{staticClass:"d-flex"},[r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])])]}}])}),r("button",{staticClass:"single-input-item btn btn-lg btn-outline-secondary btn-block btn-sm mb-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("Зарегистрироваться")])],1)])])])])])])])])},Ga=[];function Za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ja(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Za(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Va={signIn:function(t){var e=t.email,r=t.password;return d["b"].post("/signin",{email:e,password:r})},signUp:function(t){return d["b"].post("/signup",Ja({},t))}},Wa={components:{ValidationProvider:qe["a"]},data:function(){return{email:"",password:"",registerEmail:"",registerName:"",registerLastname:"",registerPassword:"",registerPasswordCheck:""}},computed:{isProcessing:function(){return this.$store.state.isProcessing}},methods:{handleSubmitSignIn:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,this.email&&this.password){a.next=4;break}return d["a"].fire({icon:"warning",title:"Заполните все поля"}),a.abrupt("return");case 4:return this.$store.dispatch("updateProcessing",!0),a.next=7,regeneratorRuntime.awrap(Va.signIn({email:this.email,password:this.password}));case 7:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r&&"success"===e.status){a.next=12;break}throw new Error(r);case 12:return localStorage.setItem("token",e.token),a.next=15,regeneratorRuntime.awrap(this.$store.commit("setCurrentUser",e.user));case 15:return a.next=17,regeneratorRuntime.awrap(this.$store.dispatch("fetchUserFavorite",e.user.id));case 17:d["a"].fire({icon:"success",title:"Вход осуществлен успешно"}),this.$router.go(-1),this.$store.dispatch("updateProcessing",!1),a.next=27;break;case 22:a.prev=22,a.t0=a["catch"](0),this.password="",this.$store.dispatch("updateProcessing",!1),d["a"].fire({icon:"warning",title:"Пожалуйста проверьте правильностьв введеных данных"});case 27:case"end":return a.stop()}}),null,this,[[0,22]])},handleSubmitSignUp:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,this.registerEmail&&this.registerName&&this.registerLastname&&this.registerPassword&&this.registerPasswordCheck){a.next=4;break}return d["a"].fire({icon:"warning",title:"Все поля являются обязательными к заполнению"}),a.abrupt("return");case 4:if(this.registerPassword===this.registerPasswordCheck){a.next=7;break}return d["a"].fire({icon:"warning",title:"Пароли разные"}),a.abrupt("return");case 7:return this.$store.dispatch("updateProcessing",!0),a.next=10,regeneratorRuntime.awrap(Va.signUp({email:this.registerEmail,name:this.registerName,lastname:this.registerLastname,password:this.registerPassword,passwordCheck:this.registerPasswordCheck}));case 10:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r&&"success"===e.status){a.next=15;break}throw new Error(e.message);case 15:localStorage.setItem("token",e.token),this.$store.commit("setCurrentUser",e.user),d["a"].fire({icon:"success",title:"Регистрация осуществлена успешно"}),this.$router.go(-1),this.$store.dispatch("updateProcessing",!1),a.next=28;break;case 22:a.prev=22,a.t0=a["catch"](0),this.$store.dispatch("updateProcessing",!1),this.registerPassword="",this.registerPasswordCheck="",d["a"].fire({icon:"warning",title:"Не удалось зарегистрироваться, проверьте правильность введенных данных"});case 28:case"end":return a.stop()}}),null,this,[[0,22]])}}},Ha=Wa,Xa=(r("2c52"),Object(f["a"])(Ha,za,Ga,!1,null,"d90731f4",null)),ts=Xa.exports,es=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("div",{staticClass:"card border-white w-100"},[t._m(0),r("div",{staticClass:"card-img-overlay mt-5 textac"},[r("h4",{attrs:{textac:""}},[t._v("Привет, "+t._s(t.name)+" "+t._s(t.lastname))])])]),r("ul",{staticClass:"nav nav-tabs mt-2"},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"userProducts"}}},[t._v("Мои товары")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"userEdit"}}},[t._v("Управление профилем")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"userChangePassword"}}},[t._v("Изменить пароль")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"userWishList"}}},[t._v("Избранное")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"userRooms"}}},[t._v("Сообщения")])],1)]),r("router-view")],1)},rs=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-img user-bg"},[r("img",{staticClass:"img-fluid",attrs:{src:"https://picsum.photos/id/177/2515/1830",alt:"user-bg"}})])}];function as(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ss(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?as(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):as(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var is={data:function(){return{id:0,name:"",email:""}},computed:ss({},Object(u["b"])(["currentUser"])),created:function(){this.setUser()},methods:{setUser:function(){this.id=this.currentUser.id,this.name=this.currentUser.name,this.lastname=this.currentUser.lastname,this.email=this.currentUser.email}}},ns=is,os=(r("35e5"),Object(f["a"])(ns,es,rs,!1,null,"98dc7510",null)),cs=os.exports,us=r("bfa9");function ds(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ls(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ds(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}a["default"].use(u["a"]);var ps=new us["a"]({key:"my-app",storage:window.localStorage}),ms=new u["a"].Store({plugins:[ps.plugin],state:{currentUser:{id:-1,name:"",email:"",role:!1},wishList:{},cart:{},isAuthenticated:!1,isProcessing:!1,isLoading:!0,token:""},mutations:{setCurrentUser:function(t,e){t.currentUser=ls({},t.currentUser,{},e),t.token=localStorage.getItem("token"),t.isAuthenticated=!0},updateCurrentUser:function(t,e){t.currentUser=ls({},t.currentUser,{},e)},revokeAuthentication:function(t){t.currentUser={},t.isAuthenticated=!1,t.token="",localStorage.removeItem("token")},WISHLIST:function(t,e){t.wishList=e},CART:function(t,e){t.cart=e},PROCESSING:function(t,e){t.isProcessing=e},LOADING:function(t,e){t.isLoading=e}},actions:{updateProcessing:function(t,e){t.commit("PROCESSING",e)},updateLoading:function(t,e){t.commit("LOADING",e)},updateCurrentUser:function(t,e){t.commit("updateCurrentUser",e)},fetchCurrentUser:function(t){var e,r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.commit,i.prev=1,i.next=4,regeneratorRuntime.awrap(X.getCurrentUser());case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s){i.next=9;break}throw new Error(s);case 9:return e("setCurrentUser",{id:a.id,name:a.name,email:a.email,role:a.role}),i.abrupt("return",!0);case 13:return i.prev=13,i.t0=i["catch"](1),e("revokeAuthentication"),i.abrupt("return",!1);case 17:case"end":return i.stop()}}),null,null,[[1,13]])},fetchUserFavorite:function(t){var e,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,regeneratorRuntime.awrap(X.getUserFavorite());case 3:if(e=s.sent,r=e.data,a=e.statusText,"OK"===a){s.next=8;break}throw new Error(a);case 8:t.commit("WISHLIST",r.products),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),d["a"].fire({icon:"error",title:"Не получается получить информацию о продукте, пожалуйста, попробуйте снова позже"});case 14:case"end":return s.stop()}}),null,null,[[0,11]])},addFavorite:function(t,e){var r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,t.dispatch("updateProcessing",!0),i.next=4,regeneratorRuntime.awrap(S["a"].addFavorite({productId:e}));case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=9;break}throw new Error(s);case 9:return i.next=11,regeneratorRuntime.awrap(t.dispatch("fetchUserFavorite"));case 11:d["a"].fire({icon:"success",title:"Товар добавлен в избранное"}),t.dispatch("updateProcessing",!1),i.next=19;break;case 15:i.prev=15,i.t0=i["catch"](0),t.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Товар не добавлен в избранное, попробуйте немного позже"});case 19:case"end":return i.stop()}}),null,null,[[0,15]])},addRoom:function(t,e){var r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,t.dispatch("updateProcessing",!0),i.next=4,regeneratorRuntime.awrap(ga.addRoom({productId:e}));case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=9;break}throw new Error(s);case 9:d["a"].fire({icon:"success",title:"Получилось"}),t.dispatch("updateProcessing",!1),i.next=17;break;case 13:i.prev=13,i.t0=i["catch"](0),t.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Не получилось"});case 17:case"end":return i.stop()}}),null,null,[[0,13]])},deleteFavorite:function(t,e){var r,a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,t.dispatch("updateProcessing",!0),i.next=4,regeneratorRuntime.awrap(S["a"].deleteFavorite({productId:e}));case 4:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=9;break}throw new Error(s);case 9:return i.next=11,regeneratorRuntime.awrap(t.dispatch("fetchUserFavorite"));case 11:d["a"].fire({icon:"success",title:"Больше не в избранных товарах"}),t.dispatch("updateProcessing",!1),i.next=19;break;case 15:i.prev=15,i.t0=i["catch"](0),t.dispatch("updateProcessing",!1),d["a"].fire({icon:"error",title:"Не удалось убрать из избранного, пожалуйста, попробуйте снова позже"});case 19:case"end":return i.stop()}}),null,null,[[0,15]])}},getters:{wishList:function(t){return t.wishList}},modules:{}});a["default"].use(x["a"]);var gs=function(t,e,r){var a=ms.state.current;!a||a.role?r():r("/404")},vs=function(t,e,r){var a=ms.state.current;!a||a.role?r():r("/404")},fs=[{path:"/",name:"root",redirect:"/index"},{path:"/signIn",name:"signIn",component:ts},{path:"/index",name:"index",component:V},{path:"/index/search",name:"search",component:function(){return r.e("chunk-2d0bd977").then(r.bind(null,"2d3b"))}},{path:"/products/:id",name:"product",component:Bt},{path:"/users/",name:"users",component:cs,children:[{path:"products",name:"userProducts",component:it},{path:"products/:id/edit",name:"userProductEdit",component:sr},{path:"password_change",name:"userChangePassword",component:ze},{path:"products/create",name:"adminProductCreate",component:dr},{path:"products/:id",name:"userProduct",component:He},{path:"edit",name:"userEdit",component:aa},{path:"wishlist",name:"userWishList",component:la},{path:"room",name:"userRooms",component:ya},{path:"rooms/:id",name:"userRoom",component:Ya}]},{path:"/admin/categories",name:"adminCategories",component:ce,beforeEnter:gs},{path:"/admin/users",name:"adminUsers",component:Jr,beforeEnter:gs},{path:"/admin/products",name:"adminProducts",component:xe,beforeEnter:gs},{path:"/admin/products/:id/edit",name:"adminProductEdit",component:Ee,beforeEnter:gs},{path:"/admin/products/create",name:"adminProductCreate",component:Fe,beforeEnter:gs},{path:"/admin/products/:id",name:"adminProduct",component:ve,beforeEnter:gs},{path:"/moderator/products",name:"moderatorProducts",component:Mr,beforeEnter:vs},{path:"/moderator/products/:id/edit",name:"moderatorProductEdit",component:kr,beforeEnter:vs},{path:"/moderator/products/create",name:"moderatorProductCreate",component:$r,beforeEnter:vs},{path:"/moderator/products/:id",name:"moderatorProduct",component:Pr,beforeEnter:vs},{path:"*",name:"notFound",component:j}],hs=new x["a"]({linkExactActiveClass:"active",routes:fs});hs.beforeEach((function(t,e,r){var a,s,i,n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token"),s=ms.state.token,i=ms.state.isAuthenticated,!a||a===s){e.next=7;break}return e.next=6,regeneratorRuntime.awrap(ms.dispatch("fetchCurrentUser"));case 6:i=e.sent;case 7:if(n=["signIn","index","products"],!n.includes(t.name)){e.next=11;break}return r(),e.abrupt("return");case 11:if(i||"sign-in"===t.name){e.next=14;break}return r("/signin"),e.abrupt("return");case 14:if(!i||"sign-in"!==t.name){e.next=17;break}return r("/products"),e.abrupt("return");case 17:r();case 18:case"end":return e.stop()}}))}));var bs=hs,ws=r("ecee"),ys=r("c074"),Ps=r("f2d1"),Cs=r("b702"),xs=r("ad3d"),_s=r("4c93"),As=r("60d4");function Os(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ks(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Os(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Object(qe["c"])("zh_TW",As),Object(qe["b"])("required",ks({},_s["f"],{message:"Поле обязательно к заполнению"})),Object(qe["b"])("email",ks({},_s["c"],{message:"Пожалуйста введите адрес электронной почты"})),Object(qe["b"])("password",{validate:function(t){return t.length>=6&&t.length<=50},message:"Пароль должен быть больше 6 символов, включая 1 букву"}),Object(qe["b"])("confirmed",ks({},_s["b"],{message:"Пароли не сопадают"})),Object(qe["b"])("length",ks({},_s["d"],{message:".."})),Object(qe["b"])("alpha_num",ks({},_s["a"],{message:"Можно ввести только буквы и цифры"})),Object(qe["b"])("regex",ks({},_s["e"],{message:"Ошибка формата"}));var js=r("5299"),Es=r.n(js),Is=r("f13c"),Rs=r.n(Is),Ss=r("fb9a"),$s=r.n(Ss);r("6672"),r("04f2"),r("c789");ws["c"].add(ys["n"],ys["l"],ys["a"],ys["m"],Ps["a"],Ps["c"],Ps["b"],ys["f"],Cs["a"],ys["o"],ys["p"],ys["g"],ys["k"],ys["d"],ys["j"],ys["h"],ys["i"],ys["e"],ys["b"],ys["c"]),a["default"].component("font-awesome-icon",xs["a"]),a["default"].use($s.a),a["default"].use(Es.a),a["default"].use(Rs.a),a["default"].config.productionTip=!1,new a["default"]({router:bs,store:ms,render:function(t){return t(C)}}).$mount("#app")},"656c":function(t,e,r){"use strict";var a=r("3140"),s=r.n(a);s.a},6672:function(t,e,r){},7292:function(t,e,r){"use strict";var a=r("e2ad"),s=r.n(a);s.a},"783a":function(t,e,r){"use strict";var a=r("00c2"),s=r.n(a);s.a},"7bcf":function(t,e,r){},"7f332":function(t,e,r){"use strict";var a=r("011e"),s=r.n(a);s.a},"85ec":function(t,e,r){},"937e":function(t,e,r){t.exports=r.p+"img/toAvi1.34c8f4d7.png"},"96d4":function(t,e,r){"use strict";var a=r("7bcf"),s=r.n(a);s.a},"9a0e":function(t,e,r){},a6a7:function(t,e,r){"use strict";var a=r("9a0e"),s=r.n(a);s.a},b78c:function(t,e,r){},b93d:function(t,e,r){},bab3:function(t,e,r){},bb0b:function(t,e,r){},bfbf:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-lg-3 col-md-4 col-sm-6 mix "},[r("div",{staticClass:"featured__item"},[r("router-link",{attrs:{to:{name:"product",params:{id:t.product.id}}}},[r("img",{staticClass:"featured__item__pic",attrs:{src:t.cardImg}}),r("div",{staticClass:"featured__item__text"},[r("h6",[r("a",{attrs:{href:"#"}},[t._v(t._s(t.product.name))])]),r("h5",[t._v(t._s(t._f("currency")(t.product.sell_price)))])])])],1)])},s=[],i=(r("a4d3"),r("4de4"),r("a9e3"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("ade3")),n=(r("96cf"),r("2708")),o=r("1157"),c=r.n(o);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={mixins:[n["a"]],props:{initialProduct:{type:Object,required:!0},cardHeight:{type:Number,required:!0}},data:function(){return{product:this.initialProduct,cardImg:"",imageFrameStyle:{height:this.cardHeight+"rem",lineHeight:this.cardHeight+"rem",background:"#f2f2f2"},imageStyle:{maxHeight:this.cardHeight+"rem"}}},created:function(){this.cardImg=this.product.image[0].url},mounted:function(){c()((function(){c()('[data-toggle="popover-hover"]').popover({html:!0,trigger:"hover",delay:{hide:500}})}))},computed:{isAuthenticated:function(){return this.$store.state.isAuthenticated},isProcessing:function(){return this.$store.state.isProcessing},dataContent:function(){return"<a href='/gpo-frontend/#/signin'>Войдите/Зарегистрируйтесь</a>"}},methods:{addFavorite:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.$store.dispatch("addFavorite",t));case 3:this.product=d({},this.product,{isFavorited:!0}),e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),null,this,[[0,6]])},deleteFavorite:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.$store.dispatch("deleteFavorite",t));case 3:this.product=d({},this.product,{isFavorited:!1}),e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),null,this,[[0,6]])},imgMouseover:function(t){this.cardImg=t[1].url},imgMouseleave:function(t){this.cardImg=t[0].url}}},p=l,m=(r("f9fc"),r("2877")),g=Object(m["a"])(p,a,s,!1,null,"09e9c3a8",null);e["a"]=g.exports},c99d:function(t,e,r){"use strict";var a=r("b93d"),s=r.n(a);s.a},df88:function(t,e,r){"use strict";var a=r("bab3"),s=r.n(a);s.a},e217:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABOwAAALuAQMAAAAnkxv3AAAABlBMVEXT09OWlpYMkBsfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAiklEQVR4nO3BMQEAAADCoPVPbQdvoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgMdHhAAEwYn5zAAAAAElFTkSuQmCC"},e2ad:function(t,e,r){},e9fb:function(t,e,r){"use strict";var a=r("fc20"),s=r.n(a);s.a},ed6a:function(t,e,r){},ee21:function(t,e,r){"use strict";r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d");var a=r("2fa3");e["a"]={getProducts:function(t){var e=t.page,r=t.categoryId,s=new URLSearchParams({page:e,categoryId:r});return a["b"].get("/products?".concat(s.toString()))},getProduct:function(t){var e=t.productId;return a["b"].get("/products/".concat(e))},addFavorite:function(t){var e=t.productId;return a["b"].post("/products/".concat(e,"/wishlist"),null)},deleteFavorite:function(t){var e=t.productId;return a["b"].delete("/products/".concat(e,"/wishlist"))},getSearchNav:function(t){return a["b"].get("/index/search".concat(t))},searchPost:function(t){return a["b"].get("/search?q=".concat(t))}}},f535:function(t,e,r){},f9fc:function(t,e,r){"use strict";var a=r("b78c"),s=r.n(a);s.a},fc20:function(t,e,r){}});
//# sourceMappingURL=app.f8fc6bfb.js.map